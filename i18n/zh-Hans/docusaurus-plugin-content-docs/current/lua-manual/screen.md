---
sidebar_position: 4
---

# å±å¹•æ¨¡å—

## å±å¹•æ¨¡å— - screen

* æ ‡æœ‰ ðŸŒŸ çš„å‡½æ•°è°ƒç”¨ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ [*å›¾ç‰‡å¯¹è±¡*](img.md#å›¾ç‰‡å¯¹è±¡)ã€‚
* æ ‡æœ‰ ðŸ“² çš„å‡½æ•°è°ƒç”¨åœ¨éž **å±å¹•ä¿æŒçŠ¶æ€** æ—¶ï¼Œä¼šéšå¼èŽ·å–å½“å‰å±å¹•å†…å®¹ï¼Œè¯¦è§ [ä¿æŒå±å¹•](#-ä¿æŒå±å¹•-screenkeep)ã€‚

### åˆå§‹åŒ–æ—‹è½¬åæ ‡ç³» \(**screen\.init**\)

#### å£°æ˜Ž

```lua
åŽŸåæ ‡ç³» = screen.init(åæ ‡ç³»)
```

#### å‚æ•°åŠè¿”å›žå€¼

* åæ ‡ç³» *æžšä¸¾åž‹*
  * `0` è¡¨ç¤ºç«–å± HOME åœ¨ä¸‹
  * `1` è¡¨ç¤ºæ¨ªå± HOME åœ¨å³
  * `2` è¡¨ç¤ºæ¨ªå± HOME åœ¨å·¦
  * `3` è¡¨ç¤ºç«–å± HOME åœ¨ä¸Š
* åŽŸåæ ‡ç³»
  * *æžšä¸¾åž‹*ï¼Œè¿”å›žè¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰ä½¿ç”¨çš„åæ ‡ç³»

#### è¯´æ˜Ž

åˆå§‹åŒ– **å±å¹•æ¨¡å—** å’Œ **æ¨¡æ‹Ÿè§¦æ‘¸æ¨¡å—** å…±äº«çš„åæ ‡ç³»ã€‚

:::info
ä½¿ç”¨ä»¥ä¸‹åˆ«åè°ƒç”¨ä¹Ÿå¯ä»¥å®žçŽ°ç›¸åŒæ•ˆæžœã€‚

``` lua
screen.init_home_on_bottom()    -- HOME åœ¨ä¸‹
screen.init_home_on_right()     -- HOME åœ¨å³
screen.init_home_on_left()      -- HOME åœ¨å·¦
screen.init_home_on_top()       -- HOME åœ¨ä¸Š
```

:::

#### ç¤ºä¾‹

```lua title="screen.init"
screen.init(0)    -- HOME åœ¨ä¸‹
screen.init(1)    -- HOME åœ¨å³
screen.init(2)    -- HOME åœ¨å·¦
screen.init(3)    -- HOME åœ¨ä¸Š
```

### èŽ·å–æ—‹è½¬åæ ‡ç³» \(**screen\.orientation**\)

#### å£°æ˜Ž

```lua
åæ ‡ç³» = screen.orientation()
```

#### å‚æ•°åŠè¿”å›žå€¼

* åæ ‡ç³» *æžšä¸¾åž‹*
  * `0` è¡¨ç¤ºç«–å± HOME åœ¨ä¸‹
  * `1` è¡¨ç¤ºæ¨ªå± HOME åœ¨å³
  * `2` è¡¨ç¤ºæ¨ªå± HOME åœ¨å·¦
  * `3` è¡¨ç¤ºç«–å± HOME åœ¨ä¸Š

#### è¯´æ˜Ž

èŽ·å–å½“å‰ **å±å¹•æ¨¡å—** å’Œ **æ¨¡æ‹Ÿè§¦æ‘¸æ¨¡å—** å…±äº«çš„åæ ‡ç³»ã€‚

:::note

* `screen.ORIENTATION_HOME_ON_BOTTOM` è¡¨ç¤ºç«–å± HOME åœ¨ä¸‹
* `screen.ORIENTATION_HOME_ON_RIGHT` è¡¨ç¤ºæ¨ªå± HOME åœ¨å³
* `screen.ORIENTATION_HOME_ON_LEFT` è¡¨ç¤ºæ¨ªå± HOME åœ¨å·¦
* `screen.ORIENTATION_HOME_ON_TOP` è¡¨ç¤ºç«–å± HOME åœ¨ä¸Š

:::

### åæ ‡æ—‹è½¬è½¬æ¢ \(**screen\.rotate\_xy**\)

#### å£°æ˜Ž

```lua
æ—‹è½¬åŽçš„æ¨ªåæ ‡, æ—‹è½¬åŽçš„çºµåæ ‡ = screen.rotate_xy(æ¨ªåæ ‡, çºµåæ ‡, æ—‹è½¬æ–¹å‘)
```

#### å‚æ•°åŠè¿”å›žå€¼

* æ¨ªåæ ‡, çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œéœ€è¦æ—‹è½¬çš„åæ ‡
* æ—‹è½¬æ–¹å‘ *æ•´æ•°åž‹*
  * `0` è¡¨ç¤ºä¸æ—‹è½¬
  * `1` è¡¨ç¤ºå¾€å·¦ 90 åº¦æ—‹è½¬
  * `2` è¡¨ç¤ºå¾€å³ 90 åº¦æ—‹è½¬
  * `3` è¡¨ç¤º 180 åº¦æ—‹è½¬
* æ—‹è½¬åŽçš„æ¨ªåæ ‡, æ—‹è½¬åŽçš„çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žä½¿ç”¨ **æ—‹è½¬æ–¹å‘** ä½œä¸ºé€‰é¡¹æ—‹è½¬åŽçš„åæ ‡

#### è¯´æ˜Ž

åæ ‡æ—‹è½¬è½¬æ¢ï¼Œé€šå¸¸ç”¨äºŽå°†ç«–å±åæ ‡è½¬æ¢æˆæ¨ªå±åæ ‡ã€‚

#### ç¤ºä¾‹

```lua title="screen.rotate_xy"
rx, ry = screen.rotate_xy(100, 200, 1)
```

### èŽ·å–å±å¹•å°ºå¯¸ \(**screen\.size**\)

#### å£°æ˜Ž

```lua
å±å®½, å±é«˜ = screen.size()
```

#### å‚æ•°åŠè¿”å›žå€¼

* å±å®½ *æ•´æ•°åž‹*
* å±é«˜ *æ•´æ•°åž‹*

#### è¯´æ˜Ž

ç»è¿‡ iOS ç³»ç»Ÿç¼©æ”¾ã€é‡é‡‡æ ·åŽçš„å±å¹•å°ºå¯¸ï¼Œå•ä½ä¸º **åƒç´ ï¼ˆpixelï¼‰**ã€‚

:::info
è¿”å›žå€¼ä¸å—å½“å‰æ˜¥æ¿æˆ–è€…åº”ç”¨çš„çš„æ¨ªç«–å±çŠ¶æ€å½±å“ï¼Œä½†æ˜¯å— **æ”¾å¤§æ¨¡å¼** å½±å“ã€‚
:::

#### ç¤ºä¾‹

```lua title="screen.size"
-- æ ¹æ®åˆ†è¾¨çŽ‡åˆ¤æ–­è®¾å¤‡ç±»åž‹
local width, height = screen.size()
if width == 750 and height == 1334 then
  -- æ ‡å‡†æ¨¡å¼çš„ iPhone 6S, 7, 8
elseif width == 640 and height == 1136 then
  -- æ”¾å¤§æ¨¡å¼çš„ iPhone 6S, 7, 8
end
```

### ðŸ“² ä¿æŒå±å¹• \(**screen\.keep**\)

#### å£°æ˜Ž

```lua
èŽ·å–å±å¹•å†…å®¹è®¡æ•° = screen.keep()
```

#### å‚æ•°åŠè¿”å›žå€¼

* èŽ·å–å±å¹•å†…å®¹è®¡æ•°
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žå½“å‰[è„šæœ¬è¿›ç¨‹](../basic-concepts/process-control-flow.md)èŽ·å–å±å¹•å†…å®¹çš„æ¬¡æ•°

#### è¯´æ˜Ž

åœ¨å½“å‰è„šæœ¬è¿›ç¨‹ä¸­èŽ·å–ä¸€ä»½å½“å‰å±å¹•å†…å®¹çš„å‰¯æœ¬ï¼Œå¹¶è¿›å…¥ **å±å¹•ä¿æŒçŠ¶æ€**ï¼Œ**èŽ·å–å±å¹•å†…å®¹è®¡æ•°** å‘ç”Ÿè‡ªå¢žã€‚

* åœ¨ **å±å¹•ä¿æŒçŠ¶æ€** ä¸‹ï¼Œå¤šæ¬¡è°ƒç”¨å–è‰²ã€æ‰¾è‰²ã€æˆªå›¾æˆ–æ‰¾å›¾ç­‰ ðŸ“² å‡½æ•°ï¼Œå°†æŒç»­åŸºäºŽä¿æŒçš„å‰¯æœ¬è¿›è¡Œè¿ç®—ï¼Œè€Œä¸ä¼šé‡å¤èŽ·å–æ–°çš„å±å¹•å†…å®¹ã€‚
* åœ¨ **å±å¹•ä¿æŒçŠ¶æ€** ä¸‹ï¼Œ**èŽ·å–å±å¹•å†…å®¹è®¡æ•°** ä¸ä¼šå¢žåŠ ã€‚
* è°ƒç”¨ [`screen.unkeep`](#é€€å‡ºå±å¹•ä¿æŒçŠ¶æ€-screenunkeep) å‡½æ•°ä»¥é€€å‡º **å±å¹•ä¿æŒçŠ¶æ€**ã€‚

:::note
åªä¼šåˆ·æ–°æ ‡æœ‰ ðŸ“² çš„å‡½æ•°çš„æ•°æ®æ¥æºï¼Œè€Œ **ä¸ä¼š** å¯¼è‡´çœŸå®žå±å¹•ç”»é¢å¡ä½ä¸åŠ¨ã€‚
:::

#### ç¤ºä¾‹

```lua title="screen.keep"
screen.keep()    -- ä¿æŒå±å¹•
for k = 1, 640, 10 do
  for j = 1, 960, 10 do
    color = string.format("%X", screen.get_color(k, j))  -- æ ¼å¼åŒ–ä¸ºåå…­è¿›åˆ¶æ–‡æœ¬
    sys.log("("..k..", "..j..") Color: "..color..".")    -- è¾“å‡ºåˆ°ç³»ç»Ÿæ—¥å¿—
  end
end
screen.unkeep()  -- é€€å‡ºå±å¹•ä¿æŒçŠ¶æ€
```

:::note

* é’ˆå¯¹åŒä¸€ä½ç½®ä¸¤è¡Œè¿žç»­å•ç‹¬çš„ [`screen.get_color`](#-èŽ·å–å±å¹•ä¸ŠæŸç‚¹é¢œè‰²-screenget_color) è°ƒç”¨å¯èƒ½å–åˆ°ä¸åŒçš„å€¼ã€‚
* `screen.keep` çš„æƒ…å†µä¸‹ [`screen.get_color`](#-èŽ·å–å±å¹•ä¸ŠæŸç‚¹é¢œè‰²-screenget_color) å•ç‹¬è°ƒç”¨è€—æ—¶ä¼šè¶…è¿‡ä¸€æ¬¡ `screen.keep` çš„è€—æ—¶ã€‚
* è°ƒç”¨ `screen.keep` ä¹‹åŽï¼Œå†è¿žç»­è°ƒç”¨ 50 æ¬¡ [`screen.get_color`](#-èŽ·å–å±å¹•ä¸ŠæŸç‚¹é¢œè‰²-screenget_color) è€—æ—¶å¯ä»¥ç­‰åŒäºŽè°ƒç”¨ä¸€æ¬¡ `screen.keep`

:::

### é€€å‡ºå±å¹•ä¿æŒçŠ¶æ€ \(**screen\.unkeep**\)

#### å£°æ˜Ž

```lua
èŽ·å–å±å¹•å†…å®¹è®¡æ•° = screen.unkeep()
```

#### å‚æ•°åŠè¿”å›žå€¼

* èŽ·å–å±å¹•å†…å®¹è®¡æ•°
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žå½“å‰[è„šæœ¬è¿›ç¨‹](../basic-concepts/process-control-flow.md)èŽ·å–å±å¹•å†…å®¹çš„æ¬¡æ•°

#### è¯´æ˜Ž

å–æ¶ˆ [`screen.keep`](#-ä¿æŒå±å¹•-screenkeep) å‡½æ•°çš„æ•ˆæžœï¼Œé€€å‡º **å±å¹•ä¿æŒçŠ¶æ€**ã€‚  
é€€å‡º **å±å¹•ä¿æŒçŠ¶æ€** åŽï¼Œæ¯æ¬¡è°ƒç”¨å–è‰²ã€æ‰¾è‰²ã€æˆªå›¾æˆ–æ‰¾å›¾ç­‰ ðŸ“² å‡½æ•°ï¼Œéƒ½ä¼šé‡æ–°èŽ·å–å±å¹•å†…å®¹ï¼Œ**èŽ·å–å±å¹•å†…å®¹è®¡æ•°** é€’å¢žã€‚

#### ç¤ºä¾‹

* [å‚è€ƒ `screen.keep` ç¤ºä¾‹](#-ä¿æŒå±å¹•-screenkeep)

### ðŸ“² èŽ·å–å±å¹•ä¸ŠæŸç‚¹é¢œè‰² \(**screen\.get\_color**\)

#### å£°æ˜Ž

```lua
é¢œè‰²å€¼ = screen.get_color(æ¨ªåæ ‡, çºµåæ ‡)
```

#### å‚æ•°åŠè¿”å›žå€¼

* æ¨ªåæ ‡, çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨ç›®æ ‡ç‚¹çš„åæ ‡
* é¢œè‰²å€¼
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žç›®æ ‡ç‚¹é¢œè‰²çš„ RGB å€¼

#### ç¤ºä¾‹

```lua title="screen.get_color"
local c = screen.get_color(512, 133)
if c == 0xffffff then
  sys.alert("åæ ‡ (512,133) æ˜¯çº¯ç™½è‰²")
end
```

### ðŸ“² èŽ·å–å±å¹•ä¸ŠæŸç‚¹é¢œè‰² RGB \(**screen\.get\_color\_rgb**\)

#### å£°æ˜Ž

```lua
çº¢, ç»¿, è“ = screen.get_color_rgb(æ¨ªåæ ‡, çºµåæ ‡)
```

#### å‚æ•°åŠè¿”å›žå€¼

* æ¨ªåæ ‡, çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨ç›®æ ‡ç‚¹çš„åæ ‡
* çº¢, ç»¿, è“
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žç›®æ ‡ç‚¹é¢œè‰²çš„ Rã€Gã€B å€¼ï¼Œå–å€¼èŒƒå›´ 0 ~ 255

#### ç¤ºä¾‹

```lua title="screen.get_color_rgb"
local r, g, b = screen.get_color_rgb(512, 133)
if r == 0xff and g == 0xff and b == 0xff then
  sys.alert("åæ ‡ (512,133) æ˜¯çº¯ç™½è‰²")
end
```

### ðŸ“² å±å¹•å¤šç‚¹é¢œè‰²åŒ¹é… \(**screen\.is\_colors**\)

#### å£°æ˜Ž

```lua
æ˜¯å¦å®Œå…¨åŒ¹é… = screen.is_colors({
    {æ¨ªåæ ‡*, çºµåæ ‡*, é¢œè‰²*},
    {æ¨ªåæ ‡*, çºµåæ ‡*, é¢œè‰²*},
    ...
}[, é¢œè‰²ç›¸ä¼¼åº¦])
```

#### å‚æ•°åŠè¿”å›žå€¼

* æ¨ªåæ ‡\*, çºµåæ ‡\*
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨å…¶ä¸­æŸç‚¹åæ ‡
* é¢œè‰²\*
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨å…¶ä¸­æŸç‚¹éœ€è¦åŒ¹é…çš„é¢œè‰²å€¼
* é¢œè‰²ç›¸ä¼¼åº¦
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œä»£è¡¨éœ€è¦çš„é¢œè‰²çš„ç›¸ä¼¼åº¦ï¼Œå–å€¼èŒƒå›´ 1 ~ 100ï¼Œé»˜è®¤ `100`
* æ˜¯å¦å®Œå…¨åŒ¹é…
  * *å¸ƒå°”åž‹*ï¼Œæ‰€æœ‰ç‚¹çš„é¢œè‰²éƒ½åŒ¹é…åˆ™è¿”å›ž `true`ï¼Œå¦åˆ™è¿”å›ž `false`

#### è¯´æ˜Ž

åŒ¹é…å±å¹•ä¸Šè‹¥å¹²ç‚¹çš„é¢œè‰²ã€‚

#### ç¤ºä¾‹

```lua title="screen.is_colors"
if screen.is_colors({
  { 509, 488, 0xec1c23 },  -- å¦‚æžœåæ ‡ (509, 488) çš„é¢œè‰²ä¸Ž 0xec1c23 ç›¸ä¼¼åº¦åœ¨ 90% ä»¥ä¸Š
  { 514, 470, 0x00adee },  -- åŒæ—¶åæ ‡ (514, 470) çš„é¢œè‰²ä¸Ž 0x00adee ç›¸ä¼¼åº¦åœ¨ 90% ä»¥ä¸Š
  { 508, 478, 0xffc823 },  -- åŒæ—¶åæ ‡ (508, 478) çš„é¢œè‰²ä¸Ž 0xffc823 ç›¸ä¼¼åº¦åœ¨ 90% ä»¥ä¸Š
  { 511, 454, 0xa78217 },  -- åŒæ—¶åæ ‡ (511, 454) çš„é¢œè‰²ä¸Ž 0xa78217 ç›¸ä¼¼åº¦åœ¨ 90% ä»¥ä¸Š
  { 521, 433, 0xd0d2d2 },  -- åŒæ—¶åæ ‡ (521, 433) çš„é¢œè‰²ä¸Ž 0xd0d2d2 ç›¸ä¼¼åº¦åœ¨ 90% ä»¥ä¸Š
}, 90) then                -- åˆ™åŒ¹é…
  sys.alert("åŒ¹é…ï¼")
else
  sys.alert("ä¸åŒ¹é…ï¼")
end
```

### ðŸ“² å¤šç‚¹ç›¸ä¼¼åº¦æ¨¡å¼æ‰¾è‰² \(**screen\.find\_color**\)

#### å£°æ˜Ž

```lua
æ¨ªåæ ‡, çºµåæ ‡ = screen.find_color({
    [find_all = æ˜¯å¦æœç´¢å¤šä¸ªç»“æžœ],
    [max_results = æœ€å¤§ç»“æžœæ•°],
    [max_miss = å…è®¸æœ€å¤šæœªå‘½ä¸­æ•°],
    {èµ·å§‹ç‚¹æ¨ªåæ ‡, èµ·å§‹ç‚¹çºµåæ ‡, èµ·å§‹ç‚¹é¢œè‰²[, èµ·å§‹ç‚¹ç›¸ä¼¼åº¦]},
    {åç§»ç‚¹æ¨ªåæ ‡*, åç§»ç‚¹çºµåæ ‡*, åç§»ç‚¹é¢œè‰²*[, åç§»ç‚¹ç›¸ä¼¼åº¦*]},
    {åç§»ç‚¹æ¨ªåæ ‡*, åç§»ç‚¹çºµåæ ‡*, åç§»ç‚¹é¢œè‰²*[, åç§»ç‚¹ç›¸ä¼¼åº¦*]},
    ...
}[, å…¨å±€ç›¸ä¼¼åº¦, å·¦, ä¸Š, å³, ä¸‹])
```

#### å‚æ•°åŠè¿”å›žå€¼

* æ˜¯å¦æœç´¢å¤šä¸ªç»“æžœ
  * *å¸ƒå°”åž‹*ï¼Œ*å¯é€‰*ï¼Œè¿™ä¸ªæ ‡ç­¾è®¾ç½®ä¸º `true` ä¼šè¿”å›žèŒƒå›´å†…æ‰€æœ‰åŒ¹é…ä½ç½®çš„ä¸€ä¸ªè¡¨ï¼Œæ ¼å¼ä¸º `{{x1, y1}, {x2, y2}, ...}`ï¼Œé»˜è®¤ `false`
* æœ€å¤§ç»“æžœæ•°
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œå½“ `find_all`ï¼ˆ**æ˜¯å¦æœç´¢å¤šä¸ªç»“æžœ**ï¼‰æ ‡ç­¾è®¾ç½®ä¸º `true` çš„æ—¶å€™ï¼Œè¿™ä¸ªè¡¨ç¤ºæœ€å¤šè¿”å›žç»“æžœæ•°ï¼Œæœ€å¤šå¯ä»¥è®¾ä¸º `1000`ï¼Œé»˜è®¤ `100`
* å…è®¸æœ€å¤šæœªå‘½ä¸­æ•°
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œå¯ä»¥å…è®¸æœ€å¤šçš„ä¸åŒ¹é…çš„ç‚¹çš„æ•°é‡ï¼Œé»˜è®¤ä¸º `0`ï¼Œä¹Ÿå°±æ˜¯å…¨å‘½ä¸­æ‰ç®—æ‰¾åˆ°
* èµ·å§‹ç‚¹æ¨ªåæ ‡, èµ·å§‹ç‚¹çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨èµ·å§‹åæ ‡ï¼Œå®ƒå¹¶ä¸æ˜¯é™åˆ¶æ‰¾è‰²çš„èŒƒå›´ä¸ºå›ºå®šè¿™ä¸€ç‚¹ï¼Œè€Œä»…ä»…æ˜¯ç»™åç§»ä½ç½®ä¸€ä¸ªç›¸å¯¹åæ ‡ï¼Œä¸ç†è§£å°±å¡« `0, 0`
* èµ·å§‹ç‚¹é¢œè‰²
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨éœ€è¦æœç´¢çš„é‚£ä¸€ç‚¹çš„é¢œè‰²
* èµ·å§‹ç‚¹ç›¸ä¼¼åº¦
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œéœ€è¦æœç´¢çš„é‚£ä¸€ç‚¹é¢œè‰²çš„ç›¸ä¼¼åº¦ï¼Œå–å€¼èŒƒå›´ 1 ~ 100ï¼Œé»˜è®¤ `100`
* åç§»ç‚¹æ¨ªåæ ‡\*, åç§»ç‚¹çºµåæ ‡\*
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨ä¸€ä¸ªåç§»ä½ç½®åæ ‡
* åç§»ç‚¹é¢œè‰²\*
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨åç§»ä½ç½®éœ€è¦åŒ¹é…çš„é¢œè‰²
* åç§»ç‚¹ç›¸ä¼¼åº¦\*
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œåç§»ä½ç½®çš„é¢œè‰²çš„ç›¸ä¼¼åº¦ï¼Œå–å€¼èŒƒå›´ -100 ~ 100ï¼Œé»˜è®¤ `100`ï¼Œè´Ÿç›¸ä¼¼åº¦æ„å‘³ç€åŒ¹é…å°äºŽè¯¥ç»å¯¹å€¼çš„ç›¸ä¼¼åº¦
* å…¨å±€ç›¸ä¼¼åº¦
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œå¦‚æžœæ²¡æœ‰ç»™å•ä¸ªç‚¹è®¾ç½®ç›¸ä¼¼åº¦ï¼Œé‚£ä¹ˆæ¯ä¸€ç‚¹éƒ½ä¼šç”¨è¿™ä¸ªç›¸ä¼¼åº¦ï¼Œå–å€¼èŒƒå›´ 1 ~ 100ï¼Œé»˜è®¤ `100`
* å·¦, ä¸Š, å³, ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œæœç´¢åŒºåŸŸçš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼Œé»˜è®¤ **å…¨å±**
* æ¨ªåæ ‡, çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žåŒ¹é…è‰²çš„ç¬¬ä¸€ä¸ªè‰²çš„åæ ‡ï¼Œæœç´¢å¤±è´¥è¿”å›ž `-1, -1`

#### è¯´æ˜Ž

ä½¿ç”¨ç›¸ä¼¼åº¦æ¨¡å¼æŸ¥æ‰¾ï¼ˆæ¨¡å¼åŒ¹é…ï¼‰ï¼ŒèŽ·å–åŒºåŸŸä¸­ç¬¬ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å¤šç‚¹é¢œè‰²ç»“æž„ï¼ˆæ¨¡å¼ï¼‰çš„ä½ç½®ã€‚

:::note ä¸ä¼šå§ï¼Œä¸ä¼šå§
ä¸ä¼šæœ‰äºº[æ‰‹å†™è¿™ä¸ªåŒ¹é…è¡¨](../tutorial-extras/grab-screen-colors.mdx)å§ï¼Ÿ
:::

#### ç¤ºä¾‹

```lua title="screen.find_color"
x, y = screen.find_color({
  {  0,   0, 0xec1c23 },
  { 12,  -3, 0xffffff, 85 },
  {  5, -18, 0x00adee },
  { -1, -10, 0xffc823 },
  {  2, -34, 0xa78217 },
  { 12, -55, 0xd0d2d2 },
}, 90, 0, 0, 100, 100)
--
--[[
  åœ¨å·¦ä¸Šä¸º 0, 0 å³ä¸‹ä¸º 100, 100 çš„åŒºåŸŸæ‰¾åˆ°ç¬¬ä¸€ç‚¹ä¸Ž 0xec1c23 ç›¸ä¼¼åº¦å¤§äºŽ 90 
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (12, -3) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0xffffff ç›¸ä¼¼åº¦å¤§äºŽ 85
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (5, -18) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0x00adee ç›¸ä¼¼åº¦å¤§äºŽ 90 
  ä¸” â€¦ï¼ˆåŽé¢çš„åŒç†ï¼‰éƒ½èƒ½åŒ¹é…çš„é‚£ä¸ªç‚¹
--]]
--
-- ç­‰æ•ˆä»£ç å¦‚ä¸‹ï¼š
--
x, y = screen.find_color({
  { 509, 488, 0xec1c23 },
  { 521, 485, 0xffffff, 85 },
  { 514, 470, 0x00adee },
  { 508, 478, 0xffc823 },
  { 511, 454, 0xa78217 },
  { 521, 433, 0xd0d2d2 },
}, 90, 0, 0, 100, 100)
--
--[[
  åœ¨å·¦ä¸Šä¸º 0, 0 å³ä¸‹ä¸º 100, 100 çš„åŒºåŸŸæ‰¾åˆ°ç¬¬ä¸€ç‚¹ä¸Ž 0xec1c23 ç›¸ä¼¼åº¦å¤§äºŽ 90 
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (521-509, 485-488) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0xffffff ç›¸ä¼¼åº¦å¤§äºŽ 85 
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (514-509, 470-488) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0x00adee ç›¸ä¼¼åº¦å¤§äºŽ 90 
  ä¸” â€¦ï¼ˆåŽé¢çš„åŒç†ï¼‰éƒ½èƒ½åŒ¹é…çš„é‚£ä¸ªç‚¹
--]]
--
-- ä¸æ¢è¡Œæ— ç¼©è¿›å°±æ˜¯è¿™ä¸ªæ•ˆæžœï¼š
x, y = screen.find_color({ {0,0,0xec1c23},{12,-3,0xffffff,85},{5,-18,0x00adee},{-1,-10,0xffc823},{2,-34,0xa78217},{12,-55,0xd0d2d2} }, 90, 0, 0, 100, 100)
--
x, y = screen.find_color({  -- ååŒ¹é…æ¼”ç¤ºï¼Œåœ¨ 5C ä¸»å±å¹•è¿è¡Œå¯èŽ·å¾—ç»“æžœ
  { 516,  288, 0xffffff },
  { 519,  286, 0xffffff },
  { 521,  289, 0xffffff },
  { 516,  296, 0xffffff },
  { 522,  297, 0xffffff },
  { 520,  295, 0xffffff, -10 },  -- è¿™ä¸€ç‚¹é¢œè‰²ä¸Ž 0xffffff ç›¸ä¼¼åº¦å°äºŽ 10 æ‰åŒ¹é…ï¼Œä¸‹åŒ
  { 515,  291, 0xffffff, -10 },
  { 518,  284, 0xffffff, -10 },
  { 523,  298, 0xffffff, -10 },
  { 514,  298, 0xffffff, -10 },
  { 514,  296, 0xffffff, -10 },
}, 90)  -- ä¸å†™åŒºåŸŸå‚æ•°è¡¨ç¤ºå…¨å±æ‰¾
--
results = screen.find_color({  -- èŒƒå›´åŒ¹é…å…¨è¾“å‡ºæ¼”ç¤º
  {  527,  278, 0xde1d26 },
  {  524,  285, 0x007aff },
  {  555,  292, 0xe4ddc9 },
  {  536,  314, 0xffde02 },
  {  502,  291, 0xffde02 },
  {  502,  283, 0xe4ddc9 },
  find_all = true,  -- å¸¦è¿™ä¸ªæ ‡ç­¾å°†è¿”å›žèŒƒå›´æ‰€æœ‰åŒ¹é…çš„ä½ç½®çš„ä¸€ä¸ªè¡¨ï¼Œæ ¼å¼ä¸º { {x1, y1}, {x2, y2}, ... }
}, 90)  -- ä¸å†™åŒºåŸŸå‚æ•°è¡¨ç¤ºå…¨å±æ‰¾
```

### ðŸ“² å¤šç‚¹è‰²åæ¨¡å¼æ‰¾è‰² \(**screen\.find\_color**\)

#### å£°æ˜Ž

```lua
æ¨ªåæ ‡, çºµåæ ‡ = screen.find_color({
    [find_all = æ˜¯å¦æœç´¢å¤šä¸ªç»“æžœ],
    [max_results = æœ€å¤§ç»“æžœæ•°],
    [max_miss = å…è®¸æœ€å¤šæœªå‘½ä¸­æ•°],
    {èµ·å§‹ç‚¹æ¨ªåæ ‡, èµ·å§‹ç‚¹çºµåæ ‡, {èµ·å§‹ç‚¹é¢œè‰²[, èµ·å§‹ç‚¹è‰²å]}},
    {åç§»ç‚¹æ¨ªåæ ‡*, åç§»ç‚¹çºµåæ ‡*, {åç§»ç‚¹é¢œè‰²*, åç§»ç‚¹è‰²å*}},
    {åç§»ç‚¹æ¨ªåæ ‡*, åç§»ç‚¹çºµåæ ‡*, {åç§»ç‚¹é¢œè‰²*, åç§»ç‚¹è‰²å*}},
    ...
}[, å·¦, ä¸Š, å³, ä¸‹])
```

#### å‚æ•°åŠè¿”å›žå€¼

* æ˜¯å¦æœç´¢å¤šä¸ªç»“æžœ
  * *å¸ƒå°”åž‹*ï¼Œ*å¯é€‰*ï¼Œè¿™ä¸ªæ ‡ç­¾è®¾ç½®ä¸º `true` ä¼šè¿”å›žèŒƒå›´å†…æ‰€æœ‰åŒ¹é…ä½ç½®çš„ä¸€ä¸ªè¡¨ï¼Œæ ¼å¼ä¸º `{{x1, y1}, {x2, y2}, ...}`ï¼Œé»˜è®¤ `false`
* æœ€å¤§ç»“æžœæ•°
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œå½“ `find_all`ï¼ˆ**æ˜¯å¦æœç´¢å¤šä¸ªç»“æžœ**ï¼‰æ ‡ç­¾è®¾ç½®ä¸º `true` çš„æ—¶å€™ï¼Œè¿™ä¸ªè¡¨ç¤ºæœ€å¤šè¿”å›žç»“æžœæ•°ï¼Œæœ€å¤šå¯ä»¥è®¾ä¸º `1000`ï¼Œé»˜è®¤ `100`
* å…è®¸æœ€å¤šæœªå‘½ä¸­æ•°
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œå¯ä»¥å…è®¸æœ€å¤šçš„ä¸åŒ¹é…çš„ç‚¹çš„æ•°é‡ï¼Œé»˜è®¤ä¸º `0`ï¼Œä¹Ÿå°±æ˜¯å…¨å‘½ä¸­æ‰ç®—æ‰¾åˆ°
* èµ·å§‹ç‚¹æ¨ªåæ ‡, èµ·å§‹ç‚¹çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨èµ·å§‹åæ ‡ï¼Œå®ƒå¹¶ä¸æ˜¯é™åˆ¶æ‰¾è‰²çš„èŒƒå›´ä¸ºå›ºå®šè¿™ä¸€ç‚¹ï¼Œè€Œä»…ä»…æ˜¯ç»™åç§»ä½ç½®ä¸€ä¸ªç›¸å¯¹åæ ‡ï¼Œä¸ç†è§£å°±å¡« `0, 0`
* èµ·å§‹ç‚¹é¢œè‰²
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨éœ€è¦æœç´¢çš„é‚£ä¸€ç‚¹çš„é¢œè‰²
* èµ·å§‹ç‚¹è‰²å
  * *æ•´æ•°åž‹*ï¼Œéœ€è¦æœç´¢çš„é¢œè‰²çš„æœ€å¤§è‰²åï¼Œå¤§äºŽ `0xff000000` åˆ™ä¸ºååŒ¹é…æ¨¡å¼
* åç§»ç‚¹æ¨ªåæ ‡\*, åç§»ç‚¹çºµåæ ‡\*
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨ä¸€ä¸ªåç§»ä½ç½®åæ ‡
* åç§»ç‚¹é¢œè‰²\*
  * *æ•´æ•°åž‹*ï¼Œä»£è¡¨åç§»ä½ç½®éœ€è¦åŒ¹é…çš„é¢œè‰²
* åç§»ç‚¹è‰²å\*
  * *æ•´æ•°åž‹*ï¼Œåç§»ä½ç½®çš„é¢œè‰²çš„è‰²åï¼Œå¤§äºŽ `0xff000000` åˆ™ä¸ºååŒ¹é…æ¨¡å¼
* å·¦, ä¸Š, å³, ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œæœç´¢åŒºåŸŸçš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼Œé»˜è®¤ **å…¨å±**
* æ¨ªåæ ‡, çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žåŒ¹é…è‰²çš„ç¬¬ä¸€ä¸ªè‰²çš„åæ ‡ï¼Œæœç´¢å¤±è´¥è¿”å›ž `-1, -1`

#### è¯´æ˜Ž

ä½¿ç”¨è‰²åæ¨¡å¼æŸ¥æ‰¾ï¼ˆæ¨¡å¼åŒ¹é…ï¼‰ï¼ŒèŽ·å–åŒºåŸŸä¸­ç¬¬ä¸€ä¸ªå®Œå…¨åŒ¹é…çš„å¤šç‚¹é¢œè‰²ç»“æž„ï¼ˆæ¨¡å¼ï¼‰çš„ä½ç½®ã€‚

:::note
**è‰²åï¼ˆæˆ–åè‰²ï¼‰** ç”¨äºŽè¡¨ç¤ºé¢œè‰²åå·®èŒƒå›´ï¼Œä¸€ä¸ªé¢œè‰²é™„å¸¦è‰²åæ˜¯æŒ‡è¯¥é¢œè‰²çš„çº¢ã€ç»¿ã€è“åç§»èŒƒå›´å†…çš„æ‰€æœ‰é¢œè‰²ã€‚  
å½“ `0x456789` è‰²åä¸º `0x123456` çš„æ—¶å€™è¡¨ç¤º `0x456789` çš„çº¢æ­£è´ŸèŒƒå›´ `0x12`ã€ç»¿æ­£è´ŸèŒƒå›´ `0x34`ã€è“æ­£è´ŸèŒƒå›´ `0x56`ï¼Œä¹Ÿå°±æ˜¯å…¶çº¢è‰²èŒƒå›´ä¸º `0x45 Â± 0x12`ã€ç»¿è‰²èŒƒå›´ä¸º `0x67 Â± 0x34`ã€è“è‰²çš„èŒƒå›´ä¸º `0x89 Â± 0x56`ã€‚  
å¦‚ä¸‹è¡¨æ‰€è¿°ï¼Œ`{0x456789, 0x123456}` è¡¨ç¤ºä»Ž `0x333333` åˆ° `0x579BDF` ä¹‹é—´æ‰€æœ‰çš„é¢œè‰²ã€‚

| è´Ÿåç§» | æ­£åç§» |
|-------|-------|
| 0x45 \- 0x12 = 0x33 | 0x45 \+ 0x12 = 0x57 |
| 0x67 \- 0x34 = 0x33 | 0x67 \+ 0x12 = 0x9B |
| 0x89 \- 0x56 = 0x33 | 0x89 \+ 0x12 = 0xDF |

:::

#### ç¤ºä¾‹

```lua title="screen.find_color"
x, y = screen.find_color({
  {  0,   0, {0xec1c23, 0x000000} },
  { 12,  -3, {0xffffff, 0x101010} },
  {  5, -18, {0x00adee, 0x123456} },
  { -1, -10, {0xffc823, 0x101001} },
  {  2, -34, {0xa78217, 0x101001} },
  { 12, -55, {0xd0d2d2, 0x101001} },
}, 0, 0, 100, 100)
--
--[[
  åœ¨å·¦ä¸Šä¸º 0, 0 å³ä¸‹ä¸º 100, 100 çš„åŒºåŸŸæ‰¾åˆ°ç¬¬ä¸€ç‚¹ä¸Ž 0xec1c23 å®Œå…¨ç›¸ä¼¼ï¼ˆè‰²åä¸º 0ï¼‰
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (12, -3) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0xffffff çš„è‰²åå°äºŽ 0x101010
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (5, -18) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0x00adee è‰²åå°äºŽ 0x123456
  ä¸” â€¦ï¼ˆåŽé¢çš„åŒç†ï¼‰éƒ½èƒ½åŒ¹é…çš„é‚£ä¸ªç‚¹
--]]
--
-- ç­‰æ•ˆä»£ç å¦‚ä¸‹ï¼š
--
x, y = screen.find_color({
  { 509, 488, {0xec1c23, 0x000000} },
  { 521, 485, {0xffffff, 0x101010} },
  { 514, 470, {0x00adee, 0x123456} },
  { 508, 478, {0xffc823, 0x101001} },
  { 511, 454, {0xa78217, 0x101001} },
  { 521, 433, {0xd0d2d2, 0x101001} },
}, 0, 0, 100, 100)
--
--[[
  åœ¨å·¦ä¸Šä¸º 0, 0 å³ä¸‹ä¸º 100, 100 çš„åŒºåŸŸæ‰¾åˆ°ç¬¬ä¸€ç‚¹ä¸Ž 0xec1c23 å®Œå…¨ç›¸ä¼¼ï¼ˆè‰²åä¸º 0ï¼‰
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (521-509, 485-488) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0xffffff çš„è‰²åå°äºŽ 0x101010
  ä¸”å®ƒçš„ç›¸å¯¹åæ ‡ (514-509, 470-488) çš„ä½ç½®çš„é¢œè‰²ä¸Ž 0x00adee è‰²åå°äºŽ 0x123456
  ä¸” â€¦ï¼ˆåŽé¢çš„åŒç†ï¼‰éƒ½èƒ½åŒ¹é…çš„é‚£ä¸ªç‚¹
--]]
--
-- ä¸æ¢è¡Œæ— ç¼©è¿›å°±æ˜¯è¿™ä¸ªæ•ˆæžœï¼š
x, y = screen.find_color({ {0,0,{0xec1c23,0x000000}},{12,-3,{0xffffff,0x101010}},{5,-18,{0x00adee,0x123456}},{-1,-10,{0xffc823,0x101001}},{2,-34,{0xa78217,0x101001}},{12,-55,{0xd0d2d2,0x101001}} }, 0, 0, 100, 100)
--
x, y = screen.find_color({  -- ååŒ¹é…æ¼”ç¤ºï¼Œåœ¨ 5C ä¸»å±å¹•è¿è¡Œå¯èŽ·å¾—ç»“æžœ
  { 516,  288, {0xffffff, 0x101010} },
  { 519,  286, {0xffffff, 0x101010} },
  { 521,  289, {0xffffff, 0x101010} },
  { 516,  296, {0xffffff, 0x101010} },
  { 522,  297, {0xffffff, 0x101010} },
  { 520,  295, {0xffffff, 0xff101010} },  -- è¿™ä¸€ç‚¹é¢œè‰²ä¸Ž 0xffffff è‰²å·®å¤§äºŽ 0x101010 æ‰åŒ¹é…ï¼Œä¸‹åŒ
  { 515,  291, {0xffffff, 0xff101010} },
  { 518,  284, {0xffffff, 0xff101010} },
  { 523,  298, {0xffffff, 0xff101010} },
  { 514,  298, {0xffffff, 0xff101010} },
  { 514,  296, {0xffffff, 0xff101010} },
})  -- ä¸å†™åŒºåŸŸå‚æ•°è¡¨ç¤ºå…¨å±æ‰¾
--
results = screen.find_color({  -- èŒƒå›´åŒ¹é…å…¨è¾“å‡ºæ¼”ç¤º
  {  527,  278, {0xde1d26, 0x101010} },
  {  524,  285, {0x007aff, 0x101010} },
  {  555,  292, {0xe4ddc9, 0x101010} },
  {  536,  314, {0xffde02, 0x101010} },
  {  502,  291, {0xffde02, 0x101010} },
  {  502,  283, {0xe4ddc9, 0x101010} },
  find_all = true,  -- å¸¦è¿™ä¸ªæ ‡ç­¾å°†è¿”å›žèŒƒå›´æ‰€æœ‰åŒ¹é…çš„ä½ç½®çš„ä¸€ä¸ªè¡¨ï¼Œæ ¼å¼ä¸º { {x1, y1}, {x2, y2}, ... }
})  -- ä¸å†™åŒºåŸŸå‚æ•°è¡¨ç¤ºå…¨å±æ‰¾
```

### ðŸ“²ðŸŒŸ èŽ·å–å±å¹•å†…å®¹ \(**screen\.image**\)

#### å£°æ˜Ž

```lua
å±å¹•å†…å®¹ = screen.image([ å·¦, ä¸Š, å³, ä¸‹ ])
```

#### å‚æ•°åŠè¿”å›žå€¼

* å·¦, ä¸Š, å³, ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œä»£è¡¨æ¬²æˆªå–çš„å±å¹•åŒºåŸŸï¼Œé»˜è®¤ **å…¨å±**
* å±å¹•å†…å®¹ [*å›¾ç‰‡å¯¹è±¡*](img.md#å›¾ç‰‡å¯¹è±¡)

#### è¯´æ˜Ž

èŽ·å–å±å¹•ä¸Šéƒ¨åˆ†åŒºåŸŸçš„å†…å®¹æˆ–å…¨éƒ¨å†…å®¹ã€‚

:::caution æ€§èƒ½
äº§ç”Ÿä¸€ä¸ªæ–°çš„ *å›¾ç‰‡å¯¹è±¡*ã€‚  
ä¸å†ä½¿ç”¨è¯¥å¯¹è±¡æ—¶è¯·åŠ¡å¿…è°ƒç”¨ [`image:destroy`](img.md#é”€æ¯ä¸€ä¸ªå›¾ç‰‡å¯¹è±¡-imagedestroy) æ–¹æ³•ï¼ŒåŠæ—¶é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ã€‚
:::

#### ç¤ºä¾‹

```lua title="screen.image"
screen.image():save_to_album()  -- å…¨å±æˆªå›¾å¹¶ä¿å­˜åˆ°ç›¸å†Œ
--
screen.image():save_to_png_file("/var/mobile/1.png")  -- å…¨å±æˆªå›¾å¹¶ä¿å­˜åˆ°æ–‡ä»¶ /var/mobile/1.png
--
screen.image(100, 100, 200, 200):save_to_album()  -- æˆªå–å·¦ä¸Šåæ ‡ä¸º 100, 100 å³ä¸‹åæ ‡ä¸º 200, 200 çš„å±å¹•åŒºåŸŸå†…å®¹ï¼Œå¹¶ä¿å­˜åˆ°ç›¸å†Œ
--
pasteboard.write(screen.image(100, 100, 200, 200):png_data(), "public.png")  -- æˆªå–å·¦ä¸Šåæ ‡ä¸º 100, 100 å³ä¸‹åæ ‡ä¸º 200, 200 çš„å±å¹•åŒºåŸŸå†…å®¹ï¼Œå¹¶å†™å…¥åˆ°å‰ªè´´æ¿
```

### ðŸ“² å±å¹•æ‰¾å›¾ \(**screen\.find\_image**\)

#### å£°æ˜Ž

```lua
æ¨ªåæ ‡, çºµåæ ‡, ç»“æžœç›¸ä¼¼åº¦ = screen.find_image(å­å›¾åƒ[, ç›¸ä¼¼åº¦, å·¦, ä¸Š, å³, ä¸‹])
```

#### å‚æ•°åŠè¿”å›žå€¼

* å­å›¾åƒ
  * [*å›¾ç‰‡å¯¹è±¡*](img.md#å›¾ç‰‡å¯¹è±¡)
  * *æ–‡æœ¬åž‹*
    * éœ€è¦æ‰¾çš„å›¾ç‰‡æ–‡ä»¶è·¯å¾„ï¼Œå¦‚æžœä¸æ˜¯åˆæ³•è·¯å¾„åˆ™ä¼šä»¥ *å­—ç¬¦ä¸²åž‹* æ•°æ®æ–¹å¼è§£æž
  * *å­—ç¬¦ä¸²åž‹*
    * éœ€è¦æ‰¾çš„å›¾ç‰‡æ•°æ®ï¼Œå¯ä»¥æ˜¯ `png` æˆ– `jpeg` ç­‰æ ¼å¼
* ç›¸ä¼¼åº¦
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œéœ€è¦æ‰¾çš„å­å›¾çš„ç›¸ä¼¼åº¦ï¼Œå–å€¼èŒƒå›´ 1 ~ 100ï¼Œé»˜è®¤ä¸º `95`
* å·¦, ä¸Š, å³, ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œæœç´¢åŒºåŸŸçš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼Œé»˜è®¤ **å…¨å±**
* æ¨ªåæ ‡, çºµåæ ‡
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žæ‰¾åˆ°çš„å­å›¾å·¦ä¸Šè§’åæ ‡ï¼Œæœç´¢å¤±è´¥è¿”å›ž `-1, -1`
* ç»“æžœç›¸ä¼¼åº¦
  * *æ•´æ•°åž‹*ï¼Œè¿”å›žæ‰¾åˆ°çš„å­å›¾ä¸Žä¼ å…¥ **å­å›¾åƒ** çš„ç›¸ä¼¼åº¦ï¼Œå–å€¼èŒƒå›´ 1 ~ 100ï¼Œæœç´¢å¤±è´¥è¿”å›ž `0`

#### è¯´æ˜Ž

åœ¨å±å¹•ä¸Šå¯»æ‰¾ä¸€ä¸ª **å­å›¾åƒ** çš„ä½ç½®ã€‚  
å¯¹ **å­å›¾åƒ** è¿›è¡Œå¤šæ¯”ä¾‹ç¼©æ”¾è°ƒæ•´ï¼Œç¼©æ”¾æ¯”ä¾‹ä»Ž 100% è‡³ 20% é€’å‡ï¼Œä»¥æé«˜æœç´¢çš„æˆåŠŸçŽ‡ã€‚

:::caution å±€é™æ€§
å¦‚æžœéœ€è¦åšå¤šåˆ†è¾¨çŽ‡å…¼å®¹ï¼Œå»ºè®®åœ¨åˆ†è¾¨çŽ‡æœ€å°çš„è®¾å¤‡ä¸Šæˆªå›¾å–æ ·ã€‚å¤§åˆ†è¾¨çŽ‡ä¸Šæˆªå–çš„å­å›¾ä¼šæ— æ³•åœ¨å°åˆ†è¾¨çŽ‡è®¾å¤‡ä¸Šæ‰¾åˆ°ã€‚
:::

#### ç¤ºä¾‹ 1

```lua title="screen.find_image"
x, y = screen.find_image(  -- åŽŸå›¾ä½ç½® å·¦ä¸Š: 354, 274 | å³ä¸‹: 358, 284
"\x89\x50\x4e\x47\x0d\x0a\x1a\x0a\x00\x00\x00\x0d\x49\x48\x44\x52\x00\x00\x00\x04\x00\x00\x00\x0a\x08\x02\x00\x00\x00\x1c\x99\x68\x59\x00\x00\x00\x61\x49\x44\x41\x54\x78\xda\x63\x78\xfd\xf4\xda\xff\xff\xff\xff\xfd\xfb\xf7\xed\xcb\x5b\x86\xf7\xaf\x1f\xfc\x87\x01\x86\x2f\x1f\x5f\x02\xa9\xef\xa7\xce\x7c\xdd\xb1\x9b\xe1\xe7\xf7\xcf\x40\xce\xeb\xb2\xea\x7b\xb2\x6a\x0c\x7f\xff\xfe\x01\x72\x9e\x78\x06\x82\x38\x20\xdd\xbf\x7e\xdd\x57\xd4\x82\x72\x7e\xdd\xba\x0d\x64\x41\x39\x08\xd3\x80\x38\x6b\xe3\x7f\x86\x2a\x30\x02\x72\x8c\xa6\x40\x39\x00\xd5\x7b\x5f\x2e\xfd\xba\xd5\x32\x00\x00\x00\x00\x49\x45\x4e\x44\xae\x42\x60\x82", 95, 0, 0, 639, 1135)
```

:::note
åœ¨ Lua æºç ä¸­ï¼Œå­—ç¬¦ä¸²ä¸­ `\x` å¼€å¤´ï¼ŒåŽé¢è·Ÿä¸¤ä½ 16 è¿›åˆ¶æ•°è¡¨ç¤ºä»¥è¯¥æ•°å­—ç¼–ç çš„å•ä¸ªå­—èŠ‚ã€‚ä¾‹å¦‚ï¼š`\x58` è¡¨ç¤º `X` è¿™ä¸ªå­—ç¬¦ã€‚
:::

#### ç¤ºä¾‹ 2

```lua title="screen.find_image"
img = image.load_file("/var/mobile/1.png")
x, y = screen.find_image(img)      -- åœ¨å…¨å±èŒƒå›´å†…æ‰¾å›¾
x, y = screen.find_image(img, 85)  -- åœ¨å…¨å±èŒƒå›´å†…æ‰¾å›¾ï¼Œç›¸ä¼¼åº¦ 85%
```

#### ç¤ºä¾‹ 3

```lua title="screen.find_image"
x, y = screen.find_image("/var/mobile/1.png", 95, 0, 0, 639, 1135)  -- åœ¨æŒ‡å®šåŒºåŸŸæ‰¾å›¾
```

#### ç¤ºä¾‹ 4

```lua title="screen.find_image"
local img = image.load_file("/Applications/MobileSafari.app/AppIcon60x60@2x.png")
if img then
  x, y = screen.find_image(img, 80)  -- åœ¨å…¨å±èŒƒå›´å†…æ‰¾å›¾ï¼Œç›¸ä¼¼åº¦ 80%
  if x ~= -1 then
    touch.tap(x, y)
  else
    sys.alert("æ²¡æœ‰åœ¨å±å¹•ä¸Šæ‰¾åˆ° Safari å›¾æ ‡")
  end
else
  sys.alert("æ— æ³•è¯»å– Safari å›¾æ ‡")
end
```

### ðŸ“² å±å¹•å…‰å­¦å­—ç¬¦è¯†åˆ« \(**screen\.ocr\_text**)

#### å£°æ˜Ž 1

```lua
ç»“æžœæ–‡æœ¬åˆ—è¡¨, ç»“æžœè¯¦æƒ…è¡¨ = screen.ocr_text {
  left = å·¦, top = ä¸Š, right = å³, bottom = ä¸‹,
  languages = è¯­è¨€åˆ—è¡¨,
  words = å¤‡é€‰è¯åˆ—è¡¨,
  confidence = æœ€ä½Žç½®ä¿¡åº¦,
  level = è¯†åˆ«ç­‰çº§,
  timeout = è¶…æ—¶æ—¶é—´
}
```

#### å£°æ˜Ž 2

```lua
ç»“æžœæ–‡æœ¬åˆ—è¡¨, ç»“æžœè¯¦æƒ…è¡¨ = screen.ocr_text([ è¯†åˆ«ç­‰çº§, è¶…æ—¶æ—¶é—´ ])
```

#### å£°æ˜Ž 3

```lua
ç»“æžœæ–‡æœ¬åˆ—è¡¨, ç»“æžœè¯¦æƒ…è¡¨ = screen.ocr_text(å·¦, ä¸Š, å³, ä¸‹[, è¯†åˆ«ç­‰çº§, è¶…æ—¶æ—¶é—´])
```

#### å‚æ•°åŠè¿”å›žå€¼

* å·¦, ä¸Š, å³, ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«åŒºåŸŸçš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ã€‚é»˜è®¤ **å…¨å±**
* è¯­è¨€åˆ—è¡¨
  * *æžšä¸¾åž‹é¡ºåºè¡¨*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«è¯­è¨€åˆ—è¡¨ï¼Œé»˜è®¤ä¸º `{ "en-US" }`
    * è‹±æ–‡ `en-US`
    * ç®€ä½“ä¸­æ–‡ `zh-Hans`
* å¤‡é€‰è¯åˆ—è¡¨
  * *æ–‡æœ¬åž‹é¡ºåºè¡¨*ï¼Œ*å¯é€‰*ï¼Œç”¨äºŽæé«˜è¯†åˆ«å‡†ç¡®çŽ‡ã€‚é»˜è®¤ `{ }`
* æœ€ä½Žç½®ä¿¡åº¦
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«ç»“æžœçš„æœ€ä½Žç½®ä¿¡åº¦ï¼Œç½®ä¿¡åº¦ä½ŽäºŽæ­¤å€¼çš„å¯èƒ½ç»“æžœä¼šè¢«æŽ’é™¤ã€‚å–å€¼èŒƒå›´ 0.0 ~ 1.0ï¼Œé»˜è®¤ä¸º `0.0`
* è¯†åˆ«ç­‰çº§ *æžšä¸¾åž‹*ï¼Œ*å¯é€‰*
  * `0` è¡¨ç¤ºç²¾ç¡®è¯†åˆ«ï¼Œè¯†åˆ«ç»“æžœè¾ƒä¸ºå‡†ç¡®ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ï¼Œé»˜è®¤å€¼
  * `1` è¡¨ç¤ºå¿«é€Ÿè¯†åˆ«ï¼Œè¯†åˆ«ç»“æžœè¾ƒä¸ºæ¨¡ç³Šï¼Œä½†é€Ÿåº¦è¾ƒå¿«
* è¶…æ—¶æ—¶é—´
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤ä¸º `3000`
* ç»“æžœæ–‡æœ¬åˆ—è¡¨
  * *æ–‡æœ¬åž‹é¡ºåºè¡¨*ï¼Œä»Žä¸Šè‡³ä¸‹çš„è¯†åˆ«ç»“æžœæ–‡æœ¬åˆ—è¡¨ï¼Œæœªèƒ½åœ¨æŒ‡å®šåŒºåŸŸå†…è¯†åˆ«åˆ°æ–‡æœ¬æ—¶è¿”å›žç©ºè¡¨
* ç»“æžœè¯¦æƒ…è¡¨
  * *é¡ºåºè¡¨*ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª *å…³è”è¡¨*ï¼Œä¸Ž **ç»“æžœæ–‡æœ¬åˆ—è¡¨** ä¸­æ–‡æœ¬ä¸€ä¸€å¯¹åº”ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    * `center` *é¡ºåºè¡¨*ï¼Œè¯†åˆ«ç»“æžœä¸­å¿ƒåæ ‡ `{ x, y }`
    * `bounding_box` *é¡ºåºè¡¨*ï¼Œè¯†åˆ«ç»“æžœè¾¹ç•Œæ¡† `{ x1, y1, x2, y2 }`
    * `confidence` *æµ®ç‚¹åž‹*ï¼Œè¯†åˆ«ç»“æžœç½®ä¿¡åº¦ï¼Œå–å€¼èŒƒå›´ 0.0 ~ 1.0
    * `recognized_text` *æ–‡æœ¬åž‹*ï¼Œè¯†åˆ«ç»“æžœæ–‡æœ¬

```lua title="ç»“æžœè¯¦æƒ…è¡¨ç»“æž„"
{
  [1] = {
    confidence = 0.5,
    center = { [1] = 107, [2] = 289 },
    bounding_box = {
      [1] = 32,
      [2] = 276,
      [3] = 181,
      [4] = 303,
    },
    recognized_text = "Bluetooth",
  },
  [2] = {
    confidence = 1.0,
    center = { [1] = 337, [2] = 603 },
    bounding_box = {
      [1] = 31,
      [2] = 588,
      [3] = 644,
      [4] = 618,
    },
    recognized_text = "To pair an Apple Watch with your iPhone, go to the",
  },
  ...
}
```

#### è¯´æ˜Ž

é‡‡ç”¨ Apple æä¾›çš„ [Vision](https://developer.apple.com/documentation/vision) æ¡†æž¶ï¼Œåœ¨å±å¹•æˆ–å›¾åƒä¸Šè¿›è¡Œæ–‡å­—è¯†åˆ«ï¼Œæ”¯æŒè‹±æ–‡å’Œç®€ä½“ä¸­æ–‡ã€‚

:::note
å¿«é€Ÿè¯†åˆ«ç­‰çº§ä¸‹ï¼Œè¯†åˆ«é€Ÿåº¦çº¦ä¸ºç²¾ç¡®è¯†åˆ«çš„ 10 å€ï¼Œä½†è¯†åˆ«ç»“æžœè¾ƒä¸ºæ¨¡ç³Šï¼Œç»å¸¸ä¼šå‡ºçŽ°è¯†åˆ«é”™è¯¯çš„æƒ…å†µã€‚
:::

#### [å±å¹•æ–‡å­—æå–æ•™ç¨‹](../tutorial-extras/vision-ocr.mdx)

#### ç¤ºä¾‹ `screen.ocr_search`

```lua title="screen.ocr_search"
screen.ocr_search = function (needle, level)
  if level == nil then
    level = 0
  end
  local center = nil
  local _, details = screen.ocr_text(level)
  for _, v in ipairs(details) do
    if v["recognized_text"] == needle then
      center = v["center"]
      break
    end
  end
  if center == nil then
    return -1, -1  -- not found
  end
  return center[1], center[2]
end
```

#### ç¤ºä¾‹ `screen.ocr_match`

```lua title="screen.ocr_match"
screen.ocr_match = function (pattern, level)
  if level == nil then
    level = 0
  end
  local center = nil
  local _, details = screen.ocr_text(level)
  for _, v in ipairs(details) do
    if string.match(v["recognized_text"], pattern) then
      center = v["center"]
      break
    end
  end
  if center == nil then
    return -1, -1  -- not found
  end
  return center[1], center[2]
end
```

### ðŸ“² Tesseract å±å¹•å…‰å­¦å­—ç¬¦è¯†åˆ« \(**screen.tess\_ocr**\)

#### å£°æ˜Ž 1

```lua
require("image.tesseract")  -- éœ€è¦æå‰åŠ è½½
--
è¯†åˆ«ç»“æžœ, ç»“æžœè¯¦æƒ… = screen.tess_ocr([{
  [lang = å­—åº“åç§°,]
  [white_list = ç™½åå•,]
  [black_list = é»‘åå•,]
  [left   = å·¦,]
  [top    = ä¸Š,]
  [right  = å³,]
  [bottom = ä¸‹,]
}])
```

#### å£°æ˜Ž 2

```lua
require("image.tesseract")  -- éœ€è¦æå‰åŠ è½½
--
è¯†åˆ«ç»“æžœ, ç»“æžœè¯¦æƒ… = screen.tess_ocr([ å­—åº“åç§° ])
```

#### å‚æ•°åŠè¿”å›žå€¼

* å­—åº“åç§°
  * *æ–‡æœ¬åž‹*ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ `"eng"`
* ç™½åå•
  * *æ–‡æœ¬åž‹*ï¼Œ*å¯é€‰*ï¼Œåªå…è®¸å±•ç¤ºçš„å­—ç¬¦ç™½åå•
* é»‘åå•
  * *æ–‡æœ¬åž‹*ï¼Œ*å¯é€‰*ï¼Œåªè¿‡æ»¤çš„å­—ç¬¦é»‘åå•
* å·¦, ä¸Š, å³, ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«åŒºåŸŸçš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼Œé»˜è®¤ **å…¨å±**
* è¯†åˆ«ç»“æžœ *æ–‡æœ¬åž‹*
* ç»“æžœè¯¦æƒ…
  * *å…³è”è¡¨*ï¼Œ**è¯†åˆ«ç»“æžœ** çš„æ¯ä¸ªå¯è§å­—ç¬¦çš„ä½ç½®æè¿°

```lua title="ç»“æžœè¯¦æƒ…è¡¨ç»“æž„"
{
  [1] = {
    confidence = 96.23314666748,
    h = 20,
    x = 64,
    y = 35,
    w = 14,
    text = "7",
  },
  [2] = {
    confidence = 74.24723815918,
    h = 15,
    x = 81,
    y = 38,
    w = 5,
    text = "1",
  },
  ...
}
```

#### è¯´æ˜Ž

* **ç™½åå•** å’Œ **é»‘åå•** ä¸å¯åŒæ—¶å­˜åœ¨ï¼Œä¼˜å…ˆä½¿ç”¨ **ç™½åå•**ã€‚
* Tesseract OCR å­—åº“å¯ä»Ž [tesseract-ocr/tessdata](https://github.com/tesseract-ocr/tessdata) èŽ·å–ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œè®­ç»ƒã€‚
* å‡†å¤‡å¥½å­—åº“æ–‡ä»¶ï¼Œå¯¼å…¥åˆ°å­—åº“æ–‡ä»¶åˆ°è®¾å¤‡çš„ `/var/mobile/Media/1ferver/tessdata` ç›®å½•å³å¯ä½¿ç”¨ã€‚

#### ç¤ºä¾‹

```lua title="screen.tess_ocr"
require("image.tesseract")         -- éœ€è¦æå‰åŠ è½½
--
text = screen.tess_ocr()           -- é»˜è®¤ä¸º "eng"ï¼Œè‹±æ–‡è¯†åˆ«
--
text = screen.tess_ocr('chi_sim')  -- ç®€ä½“ä¸­æ–‡è¯†åˆ«
--
text = screen.tess_ocr {
  lang = "eng",                  -- è‹±æ–‡å­—åº“
  white_list = "0123456789",     -- ç™½åå•
}
--
text = screen.tess_ocr {
  lang = "eng",                  -- è‹±æ–‡å­—åº“
  black_list = "abcdefghijk",    -- é»‘åå•
}
--
text = screen.tess_ocr {
  lang = "chi_sim",              -- ç®€ä½“ä¸­æ–‡å­—åº“
  white_list = "0123456789.å…ƒ",  -- ç™½åå•
}
```

### ðŸ“² å±å¹•äºŒç»´ç è¯†åˆ« \(**screen\.qr\_decode**)

#### å£°æ˜Ž

```lua
è¯†åˆ«ç»“æžœæ–‡æœ¬, ç»“æžœè¯¦æƒ…è¡¨ = screen.qr_decode([ è¶…æ—¶æ—¶é—´ ])
```

#### å‚æ•°åŠè¿”å›žå€¼

* è¶…æ—¶æ—¶é—´
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œè¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚é»˜è®¤ `3000`
* è¯†åˆ«ç»“æžœæ–‡æœ¬
  * *æ–‡æœ¬åž‹*ï¼Œæœªèƒ½åœ¨è¶…æ—¶æ—¶é—´å†…è¯†åˆ«åˆ°äºŒç»´ç æ—¶è¿”å›ž `nil`
* ç»“æžœè¯¦æƒ…è¡¨ *å…³è”è¡¨*
  * `center` *é¡ºåºè¡¨*ï¼Œè¯†åˆ«ç»“æžœä¸­å¿ƒåœ¨å±å¹•æˆ–å›¾åƒä¸Šçš„åæ ‡ `{ x, y }`
  * `bounding_box` *é¡ºåºè¡¨*ï¼Œè¯†åˆ«ç»“æžœåœ¨å±å¹•æˆ–å›¾åƒä¸Šçš„è¾¹ç•Œæ¡† `{ x1, y1, x2, y2 }`
  * `confidence` *æµ®ç‚¹åž‹*ï¼Œè¯†åˆ«ç»“æžœç½®ä¿¡åº¦ï¼Œå–å€¼èŒƒå›´ 0.0 ~ 1.0
  * `payload` *æ–‡æœ¬åž‹*ï¼Œ**è¯†åˆ«ç»“æžœæ–‡æœ¬**

#### è¯´æ˜Ž

é‡‡ç”¨ Apple æä¾›çš„ [Vision](https://developer.apple.com/documentation/vision) æ¡†æž¶ï¼Œåœ¨å±å¹•æˆ–å›¾åƒä¸Šè¿›è¡ŒäºŒç»´ç è¯†åˆ«ã€‚  
æ£€æµ‹å±å¹•æˆ–å›¾åƒä¸Šå‡ºçŽ°çš„ç¬¬ä¸€ä¸ªå®Œæ•´äºŒç»´ç ï¼Œå¹¶è¿›è¡Œè§£ç ã€‚**è¯†åˆ«ç»“æžœæ–‡æœ¬** ä¸ºè§£ç äºŒç»´ç å¾—åˆ°çš„ `UTF-8` æ–‡æœ¬å†…å®¹ã€‚

#### ç¤ºä¾‹ï¼šè§£ç ä¸€ä¸ªæœ¬åœ°äºŒç»´ç å›¾ç‰‡æ–‡ä»¶

```lua title="image:qr_decode"
local img = image.load_file("/var/mobile/qr.png")
if img then
  local str = img:qr_decode()
  img:destroy()
  if str then
    sys.alert("è¯†åˆ«æˆåŠŸ\nè¯†åˆ«ç»“æžœæ˜¯ï¼š"..str)
  else
    sys.alert("è¯†åˆ«å¤±è´¥")
  end
else
  sys.alert("å›¾ç‰‡æ–‡ä»¶åŠ è½½å¤±è´¥ï¼Œæ–‡ä»¶æˆ–è®¸ä¸å­˜åœ¨")
end
```

#### ç¤ºä¾‹ï¼šè§£ç å½“å‰å±å¹•ä¸Šæ˜¾ç¤ºçš„äºŒç»´ç 

```lua title="screen.qr_decode"
local str = screen.qr_decode()
if str then
  sys.alert("è¯†åˆ«æˆåŠŸ\nè¯†åˆ«ç»“æžœæ˜¯ï¼š"..str)
else
  sys.alert("è¯†åˆ«å¤±è´¥")
end
```

### ðŸ“² å±å¹•çŸ©å½¢æ£€æµ‹ \(**screen\.detect\_rectangles**)

#### å£°æ˜Ž 1

```lua
çŸ©å½¢ä½ç½®è¡¨, ç»“æžœè¯¦æƒ…è¡¨ = screen.detect_rectangles {
  left = å·¦, top = ä¸Š, right = å³, bottom = ä¸‹,
  minRatio = æœ€å°å®½é«˜æ¯”,
  maxRatio = æœ€å¤§å®½é«˜æ¯”,
  minSize = æœ€å°å°ºå¯¸æ¯”,
  quadTolerance = æœ€å¤§å€¾è§’,
  confidence = æœ€ä½Žç½®ä¿¡åº¦,
  maxCount = æœ€å¤§ç»“æžœæ•°,
  timeout = è¶…æ—¶æ—¶é—´
}
```

#### å£°æ˜Ž 2

```lua
çŸ©å½¢ä½ç½®è¡¨, ç»“æžœè¯¦æƒ…è¡¨ = screen.detect_rectangles([ æœ€å¤§ç»“æžœæ•°, è¶…æ—¶æ—¶é—´ ])
```

#### å£°æ˜Ž 3

```lua
çŸ©å½¢ä½ç½®è¡¨, ç»“æžœè¯¦æƒ…è¡¨ = screen.detect_rectangles(å·¦, ä¸Š, å³, ä¸‹[, æœ€å¤§ç»“æžœæ•°, è¶…æ—¶æ—¶é—´])
```

#### å‚æ•°åŠè¿”å›žå€¼

* å·¦ã€ä¸Šã€å³ã€ä¸‹
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œæ£€æµ‹åŒºåŸŸçš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ã€‚é»˜è®¤ **å…¨å±**
* æœ€å°å®½é«˜æ¯”ã€æœ€å¤§å®½é«˜æ¯”
  * *æ•°å€¼åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«åˆ°çš„çŸ©å½¢çš„çŸ­è¾¹ä¸Žé•¿è¾¹çš„æ¯”å€¼ï¼Œå®½é«˜æ¯”ä¸åœ¨æ­¤èŒƒå›´å†…çš„çŸ©å½¢å°†è¢«æŽ’é™¤ã€‚å–å€¼èŒƒå›´ 0.0 ~ 1.0ï¼Œé»˜è®¤ä¸º `0.1`ã€`1.0`
* æœ€å°å°ºå¯¸æ¯”
  * *æ•°å€¼åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«åˆ°çš„çŸ©å½¢çš„é¢ç§¯ä¸Žå±å¹•æˆ–å›¾åƒé¢ç§¯çš„æ¯”å€¼ï¼Œå°ºå¯¸è¾ƒå°çš„çŸ©å½¢å°†è¢«æŽ’é™¤ã€‚å–å€¼èŒƒå›´ 0.0 ~ 1.0ï¼Œé»˜è®¤ä¸º `0.2`
* æœ€å¤§å€¾è§’
  * *æ•°å€¼åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«åˆ°çš„çŸ©å½¢çš„æœ€å¤§å€¾æ–œè§’åº¦ï¼Œå€¾æ–œè§’å¤§äºŽæ­¤å€¼çš„å¯èƒ½çŸ©å½¢ä¼šè¢«æŽ’é™¤ã€‚å–å€¼èŒƒå›´ 0.0 ~ 45.0ï¼Œé»˜è®¤ä¸º `30.0`
* æœ€ä½Žç½®ä¿¡åº¦
  * *æ•°å€¼åž‹*ï¼Œ*å¯é€‰*ï¼Œè¯†åˆ«åˆ°çŸ©å½¢çš„æœ€ä½Žç½®ä¿¡åº¦ï¼Œç½®ä¿¡åº¦ä½ŽäºŽæ­¤å€¼çš„å¯èƒ½çŸ©å½¢ä¼šè¢«æŽ’é™¤ã€‚å–å€¼èŒƒå›´ 0.0 ~ 1.0ï¼Œé»˜è®¤ä¸º `0.0`
* æœ€å¤§ç»“æžœæ•°
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œæœ€å¤šè¿”å›žçš„çŸ©å½¢æ•°é‡ã€‚é»˜è®¤ä¸º `1`
* è¶…æ—¶æ—¶é—´
  * *æ•´æ•°åž‹*ï¼Œ*å¯é€‰*ï¼Œè¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤ä¸º `3000`
* çŸ©å½¢ä½ç½®è¡¨
  * *è¡¨åž‹*ï¼Œè¿”å›žçš„çŸ©å½¢ä½ç½®è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª *æ•°å€¼åž‹é¡ºåºè¡¨*ï¼ŒåŒ…å«å…«ä¸ª *æ•°å€¼åž‹* å…ƒç´ ï¼Œåˆ†åˆ«å¯¹åº”è¯†åˆ«åˆ°çš„çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹åæ ‡ï¼Œé¡ºåºä¸ºå·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹
* ç»“æžœè¯¦æƒ…è¡¨
  * *é¡ºåºè¡¨*ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª *å…³è”è¡¨*ï¼Œä¸Ž **çŸ©å½¢ä½ç½®è¡¨** ä¸­çš„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    * `center` *é¡ºåºè¡¨*ï¼Œè¯†åˆ«ç»“æžœä¸­å¿ƒåœ¨å±å¹•æˆ–å›¾åƒä¸Šçš„åæ ‡ `{ x, y }`
    * `bounding_box` *é¡ºåºè¡¨*ï¼Œè¯†åˆ«ç»“æžœåœ¨å±å¹•æˆ–å›¾åƒä¸Šçš„è¾¹ç•Œæ¡† `{ x1, y1, x2, y2 }`
    * `confidence` *æµ®ç‚¹åž‹*ï¼Œè¯†åˆ«ç»“æžœç½®ä¿¡åº¦ï¼Œå–å€¼èŒƒå›´ 0.0 ~ 1.0
    * `payload` *æ•°å€¼åž‹é¡ºåºè¡¨*ï¼ŒåŒ…å«å…«ä¸ª *æ•°å€¼åž‹* å…ƒç´ ï¼Œåˆ†åˆ«å¯¹åº”è¯†åˆ«åˆ°çš„çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹åæ ‡ï¼Œé¡ºåºä¸ºå·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹

```lua title="ç»“æžœè¯¦æƒ…è¡¨ç»“æž„"
{
  [1] = {
    confidence = 1.0,
    center = { [1] = 372, [2] = 643 },
    bounding_box = {
      [1] = 36,
      [2] = 414,
      [3] = 708,
      [4] = 872,
    },
    payload = {
      [1] = 35.81475187093,
      [2] = 572.14322209358,
      [3] = 548.85265231133,
      [4] = 413.79873716831,
      [5] = 139.88665491343,
      [6] = 872.24944245815,
      [7] = 707.94005692005,
      [8] = 675.78785139322,
    },
  },
  ...
}
```

#### è¯´æ˜Ž

é‡‡ç”¨ Apple æä¾›çš„ [Vision](https://developer.apple.com/documentation/vision) æ¡†æž¶ï¼Œæ£€æµ‹å±å¹•æˆ–å›¾åƒä¸Šçš„å…«è‡ªç”±åº¦çŸ©å½¢ï¼ˆå››è¾¹å½¢ï¼‰ã€‚

#### ç¤ºä¾‹ï¼šæˆªå–å±å¹•ä¸Šçš„å¡ç‰‡å¹¶ä¿å­˜åˆ°ç›¸å†Œ

```lua title="screen.detect_rectangles"
rects, details = screen.detect_rectangles()
if #rects > 0 then
  local box = details[1].bounding_box
  screen.image(box[1], box[2], box[3], box[4]):save_to_album()
end
```
