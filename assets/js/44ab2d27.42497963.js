"use strict";(self.webpackChunkxxtouch_lite=self.webpackChunkxxtouch_lite||[]).push([[3389],{4309:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"lua-manual/http","title":"HTTP Module","description":"HTTP Module - http","source":"@site/docs/lua-manual/http.md","sourceDirName":"lua-manual","slug":"/lua-manual/http","permalink":"/docs/lua-manual/http","draft":false,"unlisted":false,"editUrl":"https://github.com/OwnGoalStudio/XXTouchElite/tree/main/docs/lua-manual/http.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15},"sidebar":"luaManualSidebar","previous":{"title":"Process Dictionary Module","permalink":"/docs/lua-manual/proc"},"next":{"title":"FTP Module","permalink":"/docs/lua-manual/ftp"}}');var l=t(4848),i=t(8453);const r={sidebar_position:15},d="HTTP Module",o={},a=[{value:"HTTP Module - http",id:"http-module---http",level:2},{value:"\ud83d\udea5 Initiate a GET Request (<strong>http.get</strong>)",id:"-initiate-a-get-request-httpget",level:3},{value:"Declaration",id:"declaration",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values",level:4},{value:"Description",id:"description",level:4},{value:"Example 1",id:"example-1",level:4},{value:"Example 2",id:"example-2",level:4},{value:"Example 3",id:"example-3",level:4},{value:"\ud83d\udea5 Initiate a POST Request (<strong>http.post</strong>)",id:"-initiate-a-post-request-httppost",level:3},{value:"Declaration",id:"declaration-1",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-1",level:4},{value:"Description",id:"description-1",level:4},{value:"Example 1",id:"example-1-1",level:4},{value:"Example 2",id:"example-2-1",level:4},{value:"\ud83d\udea5 HTTP File Download (<strong>http.download</strong>)",id:"-http-file-download-httpdownload",level:3},{value:"Declaration",id:"declaration-2",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-2",level:4},{value:"Example 1",id:"example-1-2",level:4},{value:"Example 2",id:"example-2-2",level:4},{value:"\ud83d\udea5 Initiate a HEAD Request (<strong>http.head</strong>)",id:"-initiate-a-head-request-httphead",level:3},{value:"Declaration",id:"declaration-3",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-3",level:4},{value:"Description",id:"description-2",level:4},{value:"Example",id:"example",level:4},{value:"\ud83d\udea5 Initiate a DELETE Request (<strong>http.delete</strong>)",id:"-initiate-a-delete-request-httpdelete",level:3},{value:"Declaration",id:"declaration-4",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-4",level:4},{value:"Description",id:"description-3",level:4},{value:"Example",id:"example-4",level:4},{value:"\ud83d\udea5 Initiate a PUT Request (<strong>http.put</strong>)",id:"-initiate-a-put-request-httpput",level:3},{value:"Declaration",id:"declaration-5",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-5",level:4},{value:"Description",id:"description-4",level:4},{value:"Example",id:"example-5",level:4}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"http-module",children:"HTTP Module"})}),"\n",(0,l.jsx)(n.h2,{id:"http-module---http",children:"HTTP Module - http"}),"\n",(0,l.jsxs)(n.p,{children:["This module will automatically process the URL using ",(0,l.jsx)(n.a,{href:"/docs/lua-manual/exstring#-url-encoding-stringencode_uristringencode_uri_component",children:(0,l.jsx)(n.code,{children:"string.encode_uri"})})," by default."]}),"\n",(0,l.jsxs)(n.p,{children:["Functions marked with \ud83d\udea5 may ",(0,l.jsx)(n.strong,{children:"yield"})," in the ",(0,l.jsx)(n.a,{href:"/docs/lua-manual/thread",children:(0,l.jsx)(n.strong,{children:"Thread Module"})}),". Before these functions return, other ",(0,l.jsx)(n.strong,{children:"threads"})," may get a chance to run."]}),"\n",(0,l.jsxs)(n.h3,{id:"-initiate-a-get-request-httpget",children:["\ud83d\udea5 Initiate a GET Request (",(0,l.jsx)(n.strong,{children:"http.get"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"http_status_code, response_header_json_text, response_body = http.get(url[, timeout_seconds, request_headers ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["url ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["timeout_seconds","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", in seconds, default is ",(0,l.jsx)(n.code,{children:"10"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_headers","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", headers for the request, format ",(0,l.jsx)(n.code,{children:"{field1 = value1, field2 = value2, ...}"}),", default is an empty table ",(0,l.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["http_status_code","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", returns ",(0,l.jsx)(n.code,{children:"-1"})," if the request times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_header_json_text","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the JSON text of the response headers if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the response content if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Uses the HTTP/1.1 protocol\u2019s GET method to request and retrieve a network resource."}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["Resources will not be stored on disk. If you need to download large network resources, consider using ",(0,l.jsx)(n.a,{href:"#-http-file-download-httpdownload",children:(0,l.jsx)(n.code,{children:"http.download"})}),"."]})}),"\n",(0,l.jsx)(n.h4,{id:"example-1",children:"Example 1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.get"',children:'local code, res_headers, body = http.get("http://www.baidu.com", 1, {\n  ["User-Agent"] = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)";  -- Simulate an IE8 request\n  ["Cookie"] = "Do you even know how to do this?";  -- Submit a Cookie along with the request\n})\nif code == 200 then  -- If the returned status code is HTTP_OK\n  sys.alert(body)    -- Output the HTML content of Baidu\'s homepage\nend\n'})}),"\n",(0,l.jsx)(n.h4,{id:"example-2",children:"Example 2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.get"',children:'-- Chinese URLs will be automatically escaped by default, URLs containing Chinese characters can be called directly as shown below\nlocal c, h, r = http.get("https://www.xxtouch.com/\u6d4b\u8bd5\u6587\u672c.txt")\nif c == 200 then  -- If the returned status code is HTTP_OK\n  sys.alert(r)    -- Output the content\nend\n--\n-- The following example is equivalent to the above example\nlocal c, h, r = http.get("https://www.xxtouch.com/%E6%B5%8B%E8%AF%95%E6%96%87%E6%9C%AC.txt", 5, {}, true--[[here]])\nif c == 200 then  -- If the returned status code is HTTP_OK\n  sys.alert(r)    -- Output the content\nend\n'})}),"\n",(0,l.jsx)(n.h4,{id:"example-3",children:"Example 3"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.get"',children:'-- Get external IPv4 address\nfunction get_ip()\n  local done = false\n  thread.dispatch(function()\n    while true do\n      if done then\n        sys.toast("", -1)\n        return\n      else\n        sys.toast("Getting IP address\u2026", device.front_orien())\n      end\n      sys.msleep(2000)\n    end\n  end)\n  while true do\n    local c, h, b = http.get("http://lumtest.com/myip.json?ts="..tostring(sys.rnd()), 60)\n    if c == 200 then\n      sys.toast("", -1)\n      done = true\n      return b:match(\'%d+%.%d+%.%d+%.%d+\')\n    end\n  end\nend\n--\n-- Copy the above code to the beginning of your script, then use it in your script\nsys.alert(get_ip())\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"-initiate-a-post-request-httppost",children:["\ud83d\udea5 Initiate a POST Request (",(0,l.jsx)(n.strong,{children:"http.post"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-1",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"http_status_code, response_header_json_text, response_body = http.post(url[, timeout_seconds, request_headers, request_body ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-1",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["url ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["timeout_seconds","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", in seconds, default is ",(0,l.jsx)(n.code,{children:"10"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_headers","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", headers for the request, format ",(0,l.jsx)(n.code,{children:"{field1 = value1, field2 = value2, ...}"}),", default is an empty table ",(0,l.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", data content to be sent with the request, default is an empty string ",(0,l.jsx)(n.code,{children:'""'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["http_status_code","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", returns ",(0,l.jsx)(n.code,{children:"-1"})," if the request times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_header_json_text","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the JSON text of the response headers if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the response content if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Uses the HTTP/1.1 protocol\u2019s POST method to submit data to the server."}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsxs)(n.p,{children:["You need to specify the ",(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type",children:(0,l.jsx)(n.code,{children:"Content-Type"})})," request header yourself, otherwise the server may refuse to accept the data."]})}),"\n",(0,l.jsx)(n.h4,{id:"example-1-1",children:"Example 1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.post"',children:'local code, res_headers, body = http.post("http://www.baidu.com", 1, {\n  ["User-Agent"] = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)",  -- Simulate an IE8 request\n  ["Cookie"] = "Do you even know how to do this?";  -- Submit a Cookie along with the request\n}, "Data to be sent")\nif code == 200 then  -- If the returned status code is HTTP_OK\n    sys.alert(body)  -- Output the HTML content of Baidu\'s homepage\nend\n'})}),"\n",(0,l.jsx)(n.h4,{id:"example-2-1",children:"Example 2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.post"',children:"local c, h, r = http.post('http://httpbin.org/post', 60, {}, 'name=havonz&qq=1004695100&wechat=havonz')\nif c == 200 then\n  sys.alert(r, 0, 'Submission successful')\nelse\n  if c == -1 then\n    sys.alert('Request failed, please check your network connection', 0, 'Connection timeout')\n  else\n    sys.alert('Error code #'..c..'\\n'..r, 0, 'HTTP Error')\n  end\nend\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"-http-file-download-httpdownload",children:["\ud83d\udea5 HTTP File Download (",(0,l.jsx)(n.strong,{children:"http.download"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-2",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"download_success, download_info = http.download(url, local_file_path[, connection_timeout_seconds, resume_mode, chunk_callback_function, buffer_size ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-2",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["url ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["local_file_path ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["connection_timeout_seconds","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", in seconds, default is ",(0,l.jsx)(n.code,{children:"10"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["resume_mode","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"boolean"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", default is ",(0,l.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["chunk_callback_function ",(0,l.jsx)(n.em,{children:"function"}),", ",(0,l.jsx)(n.em,{children:"optional"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["This function is called once for each downloaded chunk, default is ",(0,l.jsx)(n.strong,{children:"empty function"})]}),"\n",(0,l.jsxs)(n.li,{children:["The first parameter passed to the ",(0,l.jsx)(n.strong,{children:"chunk_callback_function"})," is the current download information, the callback function returns ",(0,l.jsx)(n.code,{children:"true"})," to interrupt the download"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["buffer_size","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", buffer size in bytes, default is ",(0,l.jsx)(n.strong,{children:"automatic"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["download_success ",(0,l.jsx)(n.em,{children:"boolean"})]}),"\n",(0,l.jsxs)(n.li,{children:["download_info","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"})," or ",(0,l.jsx)(n.em,{children:"string"}),", returns download details if the connection is successful, returns the reason if it fails"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="DownloadInfo Table Structure"',children:"{\n  resource_size = Total bytes of the remote resource,\n  start_pos = Starting position of this download in the resource,\n  size_download = Bytes downloaded in this download,\n  speed_download = Download speed (in bytes/second),\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"example-1-2",children:"Example 1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.download"',children:'local done, info = http.download("http://192.168.31.13/1.zip", "/var/mobile/1.zip")\nif done then\n  sys.alert("If there were no accidents, the download should be complete")\nelse\n  sys.alert("Connection failed: "..info)\nend\n'})}),"\n",(0,l.jsx)(n.h4,{id:"example-2-2",children:"Example 2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.download"',children:'local done, info = http.download("http://192.168.31.13/1.zip", "/var/mobile/1.zip", 10, true, function(binfo)\n  local percent = math.floor(((binfo.start_pos + binfo.size_download) / binfo.resource_size) * 100)\n  sys.toast("Download progress "..percent.."%")\n  return false  -- Return true to interrupt the download\nend, 4096 * 1024)\n--\nif done then\n  if info.start_pos + info.size_download < info.resource_size then\n    sys.alert(\n      "Download interrupted\\nThis download "..info.size_download.." bytes"\n      .."\\nStarted downloading from byte "..info.start_pos\n      .."\\nAverage speed is "..math.floor(info.speed_download/1024).." kB/s"\n      .."\\nRemaining "..(info.resource_size - (info.start_pos + info.size_download)).." bytes"\n    )\n  else\n    sys.alert(\n      "Download complete\\nThis download "..info.size_download.." bytes"\n      .."\\nStarted downloading from byte "..info.start_pos\n      .."\\nAverage speed is "..math.floor(info.speed_download/1024).." kB/s"\n    )\n  end\nelse\n  sys.alert("Connection failed: "..info)\nend\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"-initiate-a-head-request-httphead",children:["\ud83d\udea5 Initiate a HEAD Request (",(0,l.jsx)(n.strong,{children:"http.head"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-3",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"http_status_code, response_header_json_text = http.head(url[, timeout_seconds, request_headers ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-3",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["url ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["timeout_seconds","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", in seconds, default is ",(0,l.jsx)(n.code,{children:"10"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_headers","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", headers for the request, format ",(0,l.jsx)(n.code,{children:"{field1 = value1, field2 = value2, ...}"}),", default is an empty table ",(0,l.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["http_status_code","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", returns ",(0,l.jsx)(n.code,{children:"-1"})," if the request times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_header_json_text","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the JSON text of the response headers if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Uses the HTTP/1.1 protocol\u2019s HEAD method to request and retrieve the headers of a network resource.\nThe HEAD method usually returns the same headers as the GET method, but the HEAD request does not return the body content of the resource."}),"\n",(0,l.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.head"',children:'local c, h = http.head("https://www.xxtouch.com/\u6d4b\u8bd5\u6587\u672c.txt")\nif c == 200 then  -- If the returned status code is HTTP_OK\n  sys.alert(h)    -- Output the retrieved headers\nend\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"-initiate-a-delete-request-httpdelete",children:["\ud83d\udea5 Initiate a DELETE Request (",(0,l.jsx)(n.strong,{children:"http.delete"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-4",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"http_status_code, response_header_json_text, response_body = http.delete(url[, timeout_seconds, request_headers])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-4",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["url ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["timeout_seconds","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", in seconds, default is ",(0,l.jsx)(n.code,{children:"10"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_headers","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", headers for the request, format ",(0,l.jsx)(n.code,{children:"{field1 = value1, field2 = value2, ...}"}),", default is an empty table ",(0,l.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["http_status_code","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", returns ",(0,l.jsx)(n.code,{children:"-1"})," if the request times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_header_json_text","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the JSON text of the response headers if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the response content if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Uses the HTTP/1.1 protocol\u2019s DELETE method to request and retrieve a network resource. It is usually used to delete a network resource and generally requires authentication."}),"\n",(0,l.jsx)(n.h4,{id:"example-4",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.delete"',children:'local c, h, r = http.delete("https://www.xxtouch.com/\u6d4b\u8bd5\u6587\u672c.txt")\nif c == 200 then  -- If the returned status code is HTTP_OK\n  sys.alert(r)    -- Output the result\nend\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"-initiate-a-put-request-httpput",children:["\ud83d\udea5 Initiate a PUT Request (",(0,l.jsx)(n.strong,{children:"http.put"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-5",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"http_status_code, response_header_json_text, response_body = http.put(url[, timeout_seconds, request_headers, request_body])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-5",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["url ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["timeout_seconds","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", in seconds, default is ",(0,l.jsx)(n.code,{children:"10"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_headers","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", headers for the request, format ",(0,l.jsx)(n.code,{children:"{field1 = value1, field2 = value2, ...}"}),", default is an empty table ",(0,l.jsx)(n.code,{children:"{}"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["request_body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", data content to be sent with the request, default is an empty string ",(0,l.jsx)(n.code,{children:'""'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["http_status_code","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", returns ",(0,l.jsx)(n.code,{children:"-1"})," if the request times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_header_json_text","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the JSON text of the response headers if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["response_body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", returns the response content if the request completes, returns ",(0,l.jsx)(n.code,{children:"nil"})," if it times out"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-4",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Uses the HTTP/1.1 protocol\u2019s PUT method to submit data to the server. It is used in the same way as the POST method."}),"\n",(0,l.jsx)(n.h4,{id:"example-5",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="http.put"',children:'local code, res_headers, body = http.put("http://www.baidu.com", 1, {\n  ["User-Agent"] = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)",  -- Simulate an IE8 request\n  ["Cookie"] = "Do you even know how to do this?";  -- Submit a Cookie along with the request\n}, "Data to be sent")\nif code == 200 then  -- If the returned status code is HTTP_OK\n  sys.alert(body)    -- Output the HTML content of Baidu\'s homepage\nend\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var s=t(6540);const l={},i=s.createContext(l);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);