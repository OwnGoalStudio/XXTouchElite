"use strict";(self.webpackChunkxxtouch_lite=self.webpackChunkxxtouch_lite||[]).push([[1717],{3745:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>c,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"appendix/cloud-control-apis","title":"Cloud Control API","description":"The XXTouch\xa0Elite Cloud Control API is developed using the WebSocket protocol, with a built-in cloud control client called elfclient.","source":"@site/docs/appendix/cloud-control-apis.md","sourceDirName":"appendix","slug":"/appendix/cloud-control-apis","permalink":"/docs/appendix/cloud-control-apis","draft":false,"unlisted":false,"editUrl":"https://github.com/OwnGoalStudio/XXTouchElite/tree/main/docs/appendix/cloud-control-apis.md","tags":[],"version":"current","sidebarPosition":98,"frontMatter":{"sidebar_position":98},"sidebar":"appendixSidebar","previous":{"title":"Supported URL Schemes","permalink":"/docs/appendix/supported-url-schemes"},"next":{"title":"Lua Cheatsheet","permalink":"/docs/appendix/lua-cheatsheet"}}');var r=s(4848),i=s(8453);const c={sidebar_position:98},t="Cloud Control API",d={},o=[{value:"Specification",id:"specification",level:2},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3},{value:"Heartbeat",id:"heartbeat",level:3},{value:"Server Example Code",id:"server-example-code",level:2},{value:"Service-Related",id:"service-related",level:2},{value:"Get Service Status",id:"get-service-status",level:3},{value:"Activate License Code",id:"activate-license-code",level:3},{value:"Script-Related",id:"script-related",level:2},{value:"Get Script List",id:"get-script-list",level:3},{value:"Run Script",id:"run-script",level:3},{value:"Stop Script",id:"stop-script",level:3},{value:"Encrypt Script",id:"encrypt-script",level:3},{value:"Get Script",id:"get-script",level:3},{value:"Update Script",id:"update-script",level:3},{value:"Delete Script",id:"delete-script",level:3},{value:"System-Related",id:"system-related",level:2},{value:"Get Logs",id:"get-logs",level:3},{value:"Delete Logs",id:"delete-logs",level:3},{value:"Reboot Device",id:"reboot-device",level:3},{value:"Respring Device",id:"respring-device",level:3},{value:"Screen-Related",id:"screen-related",level:2},{value:"Get Screenshot",id:"get-screenshot",level:3},{value:"Touch-Related",id:"touch-related",level:2},{value:"Finger Down",id:"finger-down",level:3},{value:"Finger Move",id:"finger-move",level:3},{value:"Finger Up",id:"finger-up",level:3},{value:"Key-Related",id:"key-related",level:2},{value:"Key Down",id:"key-down",level:3},{value:"Key Up",id:"key-up",level:3},{value:"File-Related",id:"file-related",level:2},{value:"File List",id:"file-list",level:3},{value:"Download File",id:"download-file",level:3},{value:"Upload File",id:"upload-file",level:3},{value:"Create Directory",id:"create-directory",level:3},{value:"Delete File or Directory",id:"delete-file-or-directory",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cloud-control-api",children:"Cloud Control API"})}),"\n",(0,r.jsxs)(n.p,{children:["The XXTouch\xa0Elite Cloud Control API is developed using the WebSocket protocol, with a built-in cloud control client called ",(0,r.jsx)(n.code,{children:"elfclient"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["We also provide a cloud control server example ",(0,r.jsx)(n.a,{href:"https://github.com/XXTouchNG/XXTouch-CloudControl",children:"XXTouch-CloudControl"}),", which you can customize according to your business needs."]}),"\n",(0,r.jsxs)(n.p,{children:["You need to ",(0,r.jsx)(n.a,{href:"https://elite.82flex.com/api-283425169",children:"configure the cloud control server address"})," for the ",(0,r.jsx)(n.code,{children:"elfclient"})," client.\nOnce the client successfully connects to the WebSocket server, the server can communicate with the device following the specifications below."]}),"\n",(0,r.jsx)(n.h2,{id:"specification",children:"Specification"}),"\n",(0,r.jsx)(n.h3,{id:"request",children:"Request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "Message Type",\n  "body": "Message Data"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "Message Type",\n  "body": "Message Data",\n  "error": "Empty if successful, error message if failed"\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.code,{children:"body"})," contains binary data, it is transmitted using Base64 encoding."]})}),"\n",(0,r.jsx)(n.h3,{id:"heartbeat",children:"Heartbeat"}),"\n",(0,r.jsxs)(n.p,{children:["After the client connects, the server should periodically send ",(0,r.jsx)(n.code,{children:"ping"})," to the client at intervals not exceeding 30 seconds (default is 5 seconds).\nIf the client does not receive a ",(0,r.jsx)(n.code,{children:"ping"})," for more than 30 seconds, it will automatically disconnect and attempt to reconnect."]}),"\n",(0,r.jsx)(n.h2,{id:"server-example-code",children:"Server Example Code"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import WebSocket from 'ws'\n\nconst wss = new WebSocket.Server({ port: 9000 })\n\nwss.on('connection', (ws) => {\n  ws.on('message', (data) => {\n    const json = JSON.parse(data)\n    if (json.error) {\n      console.log('Error:' + json.error)\n    } else {\n      console.log(json.body)\n    }\n  })\n\n  setInterval(() => {\n    ws.ping(() => {})\n  }, 5000)\n\n  ws.send(\n    JSON.stringify({\n      type: 'app/state',\n    }),\n  )\n})\n"})}),"\n",(0,r.jsx)(n.h2,{id:"service-related",children:"Service-Related"}),"\n",(0,r.jsx)(n.h3,{id:"get-service-status",children:"Get Service Status"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "app/state"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "app/state",\n  "error": "",\n  "body": {\n    "app": {\n      "version": "Service Version",\n      "license": "Expiration Date"\n    },\n    "script": {\n      "select": "Currently Selected Script",\n      "running": "Is Running"\n    },\n    "system": {\n      "os": "ios",\n      "name": "Device Name",\n      "sn": "Device Serial Number",\n      "ip": "Device IP Address",\n      "battery": "Device Battery Level",\n      "log": "Last Log Entry"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"activate-license-code",children:"Activate License Code"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "app/register",\n  "body": {\n    "code": "12/16-digit Registration Code"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "app/register",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"script-related",children:"Script-Related"}),"\n",(0,r.jsx)(n.h3,{id:"get-script-list",children:"Get Script List"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/list"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/list",\n  "error": "",\n  "body": ["Script1", "Script2"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"run-script",children:"Run Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/run",\n  "body": {\n    "name": "a.lua"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/run",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"stop-script",children:"Stop Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/stop"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/stop",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"encrypt-script",children:"Encrypt Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/encrypt",\n  "body": {\n    "name": "a.lua"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/encrypt",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"get-script",children:"Get Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/get",\n  "body": {\n    "name": "a.lua"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/get",\n  "error": "",\n  "body": "Base64-encoded Script Content"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"update-script",children:"Update Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/put",\n  "body": {\n    "name": "a.lua",\n    "data": "Base64-encoded Script Content"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/put",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"delete-script",children:"Delete Script"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/delete",\n  "body": {\n    "name": "a.lua"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "script/delete",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"system-related",children:"System-Related"}),"\n",(0,r.jsx)(n.h3,{id:"get-logs",children:"Get Logs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/log/get",\n  "body": {\n    "last": 5\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/log/get",\n  "error": "",\n  "body": "Logs"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"delete-logs",children:"Delete Logs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/log/delete"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/log/delete",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"reboot-device",children:"Reboot Device"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/reboot"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/reboot",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"respring-device",children:"Respring Device"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/respring"\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "system/respring",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"screen-related",children:"Screen-Related"}),"\n",(0,r.jsx)(n.h3,{id:"get-screenshot",children:"Get Screenshot"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "screen/snapshot",\n  "body": {\n    "format": "png",\n    "scale": 100\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "screen/snapshot",\n  "error": "",\n  "body": "Base64-encoded Screenshot Data"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"touch-related",children:"Touch-Related"}),"\n",(0,r.jsx)(n.h3,{id:"finger-down",children:"Finger Down"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "touch/down",\n  "body": {\n    "finger": 1,\n    "x": 100,\n    "y": 100\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "touch/down",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"finger-move",children:"Finger Move"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "touch/move",\n  "body": {\n    "finger": 1,\n    "x": 100,\n    "y": 100\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "touch/move",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"finger-up",children:"Finger Up"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "touch/up",\n  "body": {\n    "finger": 1\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "touch/up",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"key-related",children:"Key-Related"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/appendix/supported-keycodes",children:"Supported Key Codes List"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"key-down",children:"Key Down"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "key/down",\n  "body": {\n    "code": "HOMEBUTTON",\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "key/down",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"key-up",children:"Key Up"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "key/up",\n  "body": {\n    "code": "HOMEBUTTON",\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "key/up",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"file-related",children:"File-Related"}),"\n",(0,r.jsxs)(n.p,{children:["All APIs in this section must provide a ",(0,r.jsx)(n.code,{children:"path"})," parameter, with the value starting from the ",(0,r.jsx)(n.code,{children:"/var/mobile/Media/1ferver"})," directory."]}),"\n",(0,r.jsx)(n.h3,{id:"file-list",children:"File List"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/list",\n  "body": {\n    "path": "/lua/scripts"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/list",\n  "error": "",\n  "body": [\n    { "name": "a", "type": "dir" },\n    { "name": "b", "type": "file" }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"download-file",children:"Download File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/get",\n  "body": {\n    "path": "/lua/scripts/a.dat"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/get",\n  "error": "",\n  "body": "Base64-encoded File Content"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"upload-file",children:"Upload File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/put",\n  "body": {\n    "path": "/lua/scripts/a.dat",\n    "data": "Base64-encoded File Content"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/put",\n  "error": ""\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"create-directory",children:"Create Directory"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/put",\n  "body": {\n    "path": "/dir",\n    "directory": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/put",\n  "error": "",\n  "body": {\n    "directory": true\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"delete-file-or-directory",children:"Delete File or Directory"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/delete",\n  "body": {\n    "path": "/scripts/a.lua"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "file/delete",\n  "error": ""\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var l=s(6540);const r={},i=l.createContext(r);function c(e){const n=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);