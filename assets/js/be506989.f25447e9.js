"use strict";(self.webpackChunkxxtouch_lite=self.webpackChunkxxtouch_lite||[]).push([[9905],{3673:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"lua-manual/img","title":"Image Module","description":"Image Module - image","source":"@site/docs/lua-manual/img.md","sourceDirName":"lua-manual","slug":"/lua-manual/img","permalink":"/docs/lua-manual/img","draft":false,"unlisted":false,"editUrl":"https://github.com/OwnGoalStudio/XXTouchElite/tree/main/docs/lua-manual/img.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"luaManualSidebar","previous":{"title":"Screen Module","permalink":"/docs/lua-manual/screen"},"next":{"title":"Simulated Key Module","permalink":"/docs/lua-manual/key"}}');var l=i(4848),r=i(8453);const s={sidebar_position:5},t="Image Module",c={},d=[{value:"Image Module - image",id:"image-module---image",level:2},{value:"Image Object",id:"image-object",level:3},{value:"Check if a Value is an Image Object (<strong>image.is</strong>)",id:"check-if-a-value-is-an-image-object-imageis",level:3},{value:"Declaration",id:"declaration",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values",level:4},{value:"\ud83c\udf1f Create a Blank Image Object with Specified Dimensions (<strong>image.new</strong>)",id:"-create-a-blank-image-object-with-specified-dimensions-imagenew",level:3},{value:"Declaration",id:"declaration-1",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-1",level:4},{value:"Description",id:"description",level:4},{value:"\ud83c\udf1f Create a Text Image Object (<strong>image.new_text_image</strong>)",id:"-create-a-text-image-object-imagenew_text_image",level:3},{value:"Declaration",id:"declaration-2",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-2",level:4},{value:"Description",id:"description-1",level:4},{value:"\ud83c\udf1f Create an Image Object from a File (<strong>image.load_file</strong>)",id:"-create-an-image-object-from-a-file-imageload_file",level:3},{value:"Declaration",id:"declaration-3",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-3",level:4},{value:"Example",id:"example",level:4},{value:"\ud83c\udf1f Create an Image Object from Data (<strong>image.load_data</strong>)",id:"-create-an-image-object-from-data-imageload_data",level:3},{value:"Declaration",id:"declaration-4",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-4",level:4},{value:"Example",id:"example-1",level:4},{value:"\ud83c\udf1f Encode Text into a QR Code Image (<strong>image.qr_encode</strong>)",id:"-encode-text-into-a-qr-code-image-imageqr_encode",level:3},{value:"Declaration",id:"declaration-5",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-5",level:4},{value:"Description",id:"description-2",level:4},{value:"Example",id:"example-2",level:4},{value:"Image Merging (<strong>image.oper_merge</strong>)",id:"image-merging-imageoper_merge",level:3},{value:"Declaration",id:"declaration-6",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-6",level:4},{value:"Description",id:"description-3",level:4},{value:"Example",id:"example-3",level:4},{value:"Import an Image File to the Album (<strong>image.image_to_album</strong>)",id:"import-an-image-file-to-the-album-imageimage_to_album",level:3},{value:"Declaration",id:"declaration-7",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-7",level:4},{value:"Import a Video File to the Album (<strong>image.video_to_album</strong>)",id:"import-a-video-file-to-the-album-imagevideo_to_album",level:3},{value:"Declaration",id:"declaration-8",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-8",level:4},{value:"Get the Dimensions of an Image Object (<strong>image:size</strong>)",id:"get-the-dimensions-of-an-image-object-imagesize",level:3},{value:"Declaration",id:"declaration-9",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-9",level:4},{value:"Description",id:"description-4",level:4},{value:"Example",id:"example-4",level:4},{value:"\ud83c\udf1f Create a Copy of an Image Object (<strong>image:copy</strong>)",id:"-create-a-copy-of-an-image-object-imagecopy",level:3},{value:"Declaration",id:"declaration-10",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-10",level:4},{value:"Example",id:"example-5",level:4},{value:"\ud83c\udf1f Crop a Region to Create a New Image Object (<strong>image:crop</strong>)",id:"-crop-a-region-to-create-a-new-image-object-imagecrop",level:3},{value:"Declaration",id:"declaration-11",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-11",level:4},{value:"Example",id:"example-6",level:4},{value:"Destroy an Image Object (<strong>image:destroy</strong>)",id:"destroy-an-image-object-imagedestroy",level:3},{value:"Declaration",id:"declaration-12",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-12",level:4},{value:"Description",id:"description-5",level:4},{value:"Example",id:"example-7",level:4},{value:"Save an Image Object to the Album (<strong>image:save_to_album</strong>)",id:"save-an-image-object-to-the-album-imagesave_to_album",level:3},{value:"Declaration",id:"declaration-13",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-13",level:4},{value:"Example: Save Full-Screen Content to the Album",id:"example-save-full-screen-content-to-the-album",level:4},{value:"Example: Save a File to the Album",id:"example-save-a-file-to-the-album",level:4},{value:"Example: Download a Small Image from the Internet and Save it Directly to the Album",id:"example-download-a-small-image-from-the-internet-and-save-it-directly-to-the-album",level:4},{value:"Output an Image Object to a PNG File or Data (<strong>image:save_to_png_file/image</strong>)",id:"output-an-image-object-to-a-png-file-or-data-imagesave_to_png_fileimage",level:3},{value:"Declaration",id:"declaration-14",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-14",level:4},{value:"Example: Save Full-Screen Image to a File",id:"example-save-full-screen-image-to-a-file",level:4},{value:"Output an Image Object to a JPEG File or Data (<strong>image:save_to_jpeg_file/image</strong>)",id:"output-an-image-object-to-a-jpeg-file-or-data-imagesave_to_jpeg_fileimage",level:3},{value:"Declaration",id:"declaration-15",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-15",level:4},{value:"Example: Save Full-Screen Image to a File",id:"example-save-full-screen-image-to-a-file-1",level:4},{value:"Rotate an Image Object (<strong>image:turn_left,right,upondown</strong>)",id:"rotate-an-image-object-imageturn_leftrightupondown",level:3},{value:"Declaration",id:"declaration-16",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-16",level:4},{value:"Description",id:"description-6",level:4},{value:"Resize an Image Object (<strong>image:resize</strong>)",id:"resize-an-image-object-imageresize",level:3},{value:"Declaration",id:"declaration-17",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-17",level:4},{value:"OpenCV Resize an Image Object (<strong>image:cv_resize</strong>)",id:"opencv-resize-an-image-object-imagecv_resize",level:3},{value:"Declaration",id:"declaration-18",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-18",level:4},{value:"Flip an Image Object (<strong>image:flip</strong>)",id:"flip-an-image-object-imageflip",level:3},{value:"Declaration",id:"declaration-19",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-19",level:4},{value:"OpenCV Flip an Image Object (<strong>image:cv_flip</strong>)",id:"opencv-flip-an-image-object-imagecv_flip",level:3},{value:"Declaration",id:"declaration-20",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-20",level:4},{value:"Get the Color of a Point in an Image Object (<strong>image:get_color</strong>)",id:"get-the-color-of-a-point-in-an-image-object-imageget_color",level:3},{value:"Declaration",id:"declaration-21",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-21",level:4},{value:"Description",id:"description-7",level:4},{value:"Example",id:"example-8",level:4},{value:"Set the Color of a Point in an Image Object (<strong>image:set_color</strong>)",id:"set-the-color-of-a-point-in-an-image-object-imageset_color",level:3},{value:"Declaration",id:"declaration-22",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-22",level:4},{value:"Description",id:"description-8",level:4},{value:"Replace Color (<strong>image:replace_color</strong>)",id:"replace-color-imagereplace_color",level:3},{value:"Declaration",id:"declaration-23",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-23",level:4},{value:"Description",id:"description-9",level:4},{value:"Draw an Image on Another Image (<strong>image:draw_image</strong>)",id:"draw-an-image-on-another-image-imagedraw_image",level:3},{value:"Declaration",id:"declaration-24",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-24",level:4},{value:"Description",id:"description-10",level:4},{value:"Example",id:"example-9",level:4},{value:"OpenCV Threshold Binarization (<strong>image:cv_binarization</strong>)",id:"opencv-threshold-binarization-imagecv_binarization",level:3},{value:"Declaration",id:"declaration-25",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-25",level:4},{value:"Description",id:"description-11",level:4},{value:"OpenCV Adaptive Binarization (<strong>image:cv_adaptive_binarization</strong>)",id:"opencv-adaptive-binarization-imagecv_adaptive_binarization",level:3},{value:"Declaration",id:"declaration-26",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-26",level:4},{value:"Description",id:"description-12",level:4},{value:"Color Deviation Binarization (<strong>image:binaryzation</strong>)",id:"color-deviation-binarization-imagebinaryzation",level:3},{value:"Declaration 1",id:"declaration-1-1",level:4},{value:"Declaration 2",id:"declaration-2-1",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-27",level:4},{value:"Example 1",id:"example-1-1",level:4},{value:"Example 2",id:"example-2-1",level:4},{value:"GPU Accelerated Binarization (<strong>image:binarization</strong>)",id:"gpu-accelerated-binarization-imagebinarization",level:3},{value:"Declaration",id:"declaration-27",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-28",level:4},{value:"Multi-Point Color Matching in an Image (<strong>image:is_colors</strong>)",id:"multi-point-color-matching-in-an-image-imageis_colors",level:3},{value:"Declaration",id:"declaration-28",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-29",level:4},{value:"Refer to <code>screen.is_colors</code> description",id:"refer-to-screenis_colors-description",level:4},{value:"Find Color in an Image (<strong>image:find_color</strong>)",id:"find-color-in-an-image-imagefind_color",level:3},{value:"Declaration",id:"declaration-29",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-30",level:4},{value:"Refer to <code>screen.find_color</code> description",id:"refer-to-screenfind_color-description",level:4},{value:"OpenCV Find Image in an Image (<strong>image:cv_find_image</strong>)",id:"opencv-find-image-in-an-image-imagecv_find_image",level:3},{value:"Declaration",id:"declaration-30",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-31",level:4},{value:"Description",id:"description-13",level:4},{value:"Optical Character Recognition (OCR) in an Image (<strong>image:ocr_text</strong>)",id:"optical-character-recognition-ocr-in-an-image-imageocr_text",level:3},{value:"Common Declaration",id:"common-declaration",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-32",level:4},{value:"Refer to <code>screen.ocr_text</code> description",id:"refer-to-screenocr_text-description",level:4},{value:"Tesseract Optical Character Recognition (OCR) in an Image (<strong>image:tess_ocr</strong>)",id:"tesseract-optical-character-recognition-ocr-in-an-image-imagetess_ocr",level:3},{value:"Declaration 1",id:"declaration-1-2",level:4},{value:"Declaration 2",id:"declaration-2-2",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-33",level:4},{value:"Refer to <code>screen.tess_ocr</code> description",id:"refer-to-screentess_ocr-description",level:4},{value:"QR Code Recognition in an Image (<strong>image:qr_decode</strong>)",id:"qr-code-recognition-in-an-image-imageqr_decode",level:3},{value:"Common Declaration",id:"common-declaration-1",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-34",level:4},{value:"Refer to <code>screen.qr_decode</code> description",id:"refer-to-screenqr_decode-description",level:4},{value:"Rectangle Detection in an Image (<strong>image:detect_rectangles</strong>)",id:"rectangle-detection-in-an-image-imagedetect_rectangles",level:3},{value:"Common Declaration",id:"common-declaration-2",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-35",level:4},{value:"Refer to <code>screen.detect_rectangles</code> description",id:"refer-to-screendetect_rectangles-description",level:4}];function o(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"image-module",children:"Image Module"})}),"\n",(0,l.jsx)(n.h2,{id:"image-module---image",children:"Image Module - image"}),"\n",(0,l.jsxs)(n.p,{children:["Functions marked with \ud83c\udf1f will create a new ",(0,l.jsx)(n.a,{href:"#image-object",children:(0,l.jsx)(n.em,{children:"image object"})})," without modifying the original image object."]}),"\n",(0,l.jsx)(n.admonition,{title:"Performance",type:"caution",children:(0,l.jsxs)(n.p,{children:["When an image object is no longer in use, make sure to call the ",(0,l.jsx)(n.a,{href:"#destroy-an-image-object-imagedestroy",children:(0,l.jsx)(n.code,{children:"image:destroy"})})," method to release its memory promptly."]})}),"\n",(0,l.jsx)(n.h3,{id:"image-object",children:"Image Object"}),"\n",(0,l.jsxs)(n.p,{children:["An ",(0,l.jsx)(n.em,{children:"image object"})," is a type of ",(0,l.jsxs)(n.a,{href:"https://cloudwu.github.io/lua53doc/manual.html#2.1",children:["Lua ",(0,l.jsx)(n.em,{children:"userdata"})]})," that contains information such as the width, height, number of channels, and data of the image."]}),"\n",(0,l.jsxs)(n.h3,{id:"check-if-a-value-is-an-image-object-imageis",children:["Check if a Value is an Image Object (",(0,l.jsx)(n.strong,{children:"image.is"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"is_image_object = image.is(value_to_check)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["value_to_check ",(0,l.jsx)(n.em,{children:"any"})]}),"\n",(0,l.jsxs)(n.li,{children:["is_image_object ",(0,l.jsx)(n.em,{children:"boolean"})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"-create-a-blank-image-object-with-specified-dimensions-imagenew",children:["\ud83c\udf1f Create a Blank Image Object with Specified Dimensions (",(0,l.jsx)(n.strong,{children:"image.new"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-1",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image.new(width, height)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-1",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["width, height","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the width and height of the new image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,l.jsxs)(n.p,{children:["Creates a blank image object where all points on the image are black ",(0,l.jsx)(n.code,{children:"0x000000"})," by default."]}),"\n",(0,l.jsxs)(n.h3,{id:"-create-a-text-image-object-imagenew_text_image",children:["\ud83c\udf1f Create a Text Image Object (",(0,l.jsx)(n.strong,{children:"image.new_text_image"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-2",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image.new_text_image(text[, {\n  font = font,\n  size = font_size,\n  color = font_color,\n  alpha = font_alpha,\n  back_color = background_color,\n  back_alpha = background_alpha,\n}])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-2",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["text","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", the text content to be drawn"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["font","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the font of the text to be drawn, default ",(0,l.jsx)(n.code,{children:'"Arial"'})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["font_size","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the font size of the text to be drawn, default ",(0,l.jsx)(n.code,{children:"20.0"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["font_color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the font color of the text to be drawn, default white ",(0,l.jsx)(n.code,{children:"0xffffff"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["font_alpha","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the font opacity, range 0 ~ 255, default ",(0,l.jsx)(n.code,{children:"255"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["background_color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the background color of the image, default black ",(0,l.jsx)(n.code,{children:"0x000000"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["background_alpha","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the background opacity, range 0 ~ 255, default ",(0,l.jsx)(n.code,{children:"255"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Creates an image object of specified dimensions and draws the text on it."}),"\n",(0,l.jsxs)(n.h3,{id:"-create-an-image-object-from-a-file-imageload_file",children:["\ud83c\udf1f Create an Image Object from a File (",(0,l.jsx)(n.strong,{children:"image.load_file"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-3",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image.load_file(file_path)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-3",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["file_path ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["image","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", returns ",(0,l.jsx)(n.code,{children:"nil"})," if the file does not exist"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#example-save-a-file-to-the-album",children:"Save a file to the album"})}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"-create-an-image-object-from-data-imageload_data",children:["\ud83c\udf1f Create an Image Object from Data (",(0,l.jsx)(n.strong,{children:"image.load_data"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-4",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image.load_data(image_data)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-4",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image_data","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", image data in formats such as ",(0,l.jsx)(n.code,{children:"png"})," or ",(0,l.jsx)(n.code,{children:"jpeg"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", returns ",(0,l.jsx)(n.code,{children:"nil"})," if the data is not in image format"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#example-download-a-small-image-from-the-internet-and-save-it-directly-to-the-album",children:"Download a small image from the internet and save it directly to the album"})}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"-encode-text-into-a-qr-code-image-imageqr_encode",children:["\ud83c\udf1f Encode Text into a QR Code Image (",(0,l.jsx)(n.strong,{children:"image.qr_encode"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-5",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image.qr_encode(text_content[, {\n  size = size,\n  fill_color = fill_color,\n  background_color = background_color,\n}])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-5",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["text_content","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", the text content to be encoded into a QR code"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["size","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the side length of the QR code, default ",(0,l.jsx)(n.code,{children:"320"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["fill_color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", default black opaque ",(0,l.jsx)(n.code,{children:"0xff000000"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["background_color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", default white opaque ",(0,l.jsx)(n.code,{children:"0xffffffff"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-2",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Encodes the text into a QR code image of specified size with a transparent background."}),"\n",(0,l.jsx)(n.h4,{id:"example-2",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image.qr_encode"',children:'-- Generate a blue QR code of size 320 and save it to the album\nlocal img = image.qr_encode("https://github.com/", {\n  size = 320,\n  fill_color = 0xff409bff,\n  background_color = 0xff308bef,\n})\nimg:save_to_album()\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"image-merging-imageoper_merge",children:["Image Merging (",(0,l.jsx)(n.strong,{children:"image.oper_merge"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-6",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"operation_success = image.oper_merge(image_file_name_array, output_path[, merge_direction, quality])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-6",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image_file_name_array","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table of strings"}),", list of image file names to be merged, supports absolute paths"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["output_path","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", the file name of the new image, supports absolute paths"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["merge_direction ",(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"0"})," horizontal merge, default value"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"1"})," vertical merge"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["quality","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", when the output image format is ",(0,l.jsx)(n.code,{children:"jpg"}),", controls the image quality. Range 0.0 ~ 1.0, default ",(0,l.jsx)(n.code,{children:"1.0"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["operation_success ",(0,l.jsx)(n.em,{children:"integer"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"0"})," success"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"other values"})," failure"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-3",children:"Description"}),"\n",(0,l.jsxs)(n.p,{children:["The default save path for the merged result is ",(0,l.jsx)(n.code,{children:"/var/mobile/Media/1ferver/res"}),". For custom directories, please provide a relative path."]}),"\n",(0,l.jsx)(n.h4,{id:"example-3",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'image.oper_merge({"1.png","2.png","3.png"}, "4.jpg", 0, 0.5)\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"import-an-image-file-to-the-album-imageimage_to_album",children:["Import an Image File to the Album (",(0,l.jsx)(n.strong,{children:"image.image_to_album"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-7",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image.image_to_album(image_file_path)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-7",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image_file_path","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", supported formats include ",(0,l.jsx)(n.code,{children:"png"}),", ",(0,l.jsx)(n.code,{children:"jpeg"}),", ",(0,l.jsx)(n.code,{children:"heic"}),", etc."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"import-a-video-file-to-the-album-imagevideo_to_album",children:["Import a Video File to the Album (",(0,l.jsx)(n.strong,{children:"image.video_to_album"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-8",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image.video_to_album(video_file_path)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-8",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["video_file_path","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", supported formats include ",(0,l.jsx)(n.code,{children:"mp4"}),", ",(0,l.jsx)(n.code,{children:"m4v"}),", ",(0,l.jsx)(n.code,{children:"mov"}),", etc."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"get-the-dimensions-of-an-image-object-imagesize",children:["Get the Dimensions of an Image Object (",(0,l.jsx)(n.strong,{children:"image:size"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-9",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"width, height = image:size()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-9",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["width, height","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the width and height of the current image object"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-4",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Gets the dimensions of the image object, which may change after rotation."}),"\n",(0,l.jsx)(n.h4,{id:"example-4",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:size"',children:'local img = image.load_file("/var/mobile/1.png")\nlocal w, h\nw, h = img:size()\nsys.alert("Image width: "..w.."\\nImage height: "..h)\nimg:turn_left()\nw, h = img:size()\nsys.alert("After counterclockwise rotation, image width: "..w.."\\nImage height: "..h)\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"-create-a-copy-of-an-image-object-imagecopy",children:["\ud83c\udf1f Create a Copy of an Image Object (",(0,l.jsx)(n.strong,{children:"image:copy"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-10",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image2 = image1:copy()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-10",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image1","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the original image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image2","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the new image object"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-5",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image.copy"',children:"scrn = screen.image()\nimg2 = scrn:copy()\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"-crop-a-region-to-create-a-new-image-object-imagecrop",children:["\ud83c\udf1f Crop a Region to Create a New Image Object (",(0,l.jsx)(n.strong,{children:"image:crop"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-11",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image2 = image1:crop([left, top, right, bottom])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-11",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image1","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the original image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["left, top, right, bottom","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the coordinates of the region in the original image, default ",(0,l.jsx)(n.strong,{children:"same size as the original image"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image2","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the new image object"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-6",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:crop"',children:"scrn = screen.image()\nimg2 = scrn:crop(100, 100, 200, 200)\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"destroy-an-image-object-imagedestroy",children:["Destroy an Image Object (",(0,l.jsx)(n.strong,{children:"image:destroy"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-12",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image:destroy()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-12",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-5",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Immediately releases the memory occupied by the image object. The destroyed image object cannot be used again."}),"\n",(0,l.jsx)(n.admonition,{title:"Performance",type:"caution",children:(0,l.jsx)(n.p,{children:"In scenarios where new image objects are frequently created, make sure to call this method to destroy unused image objects to prevent high memory usage, which can lead to crashes or freezes.\nLua\u2019s built-in garbage collection mechanism will also periodically collect and destroy unused image objects."})}),"\n",(0,l.jsx)(n.h4,{id:"example-7",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:destroy"',children:'sys.alert("Click OK to start monitoring screen status after 1 second")\n--\nsys.msleep(1000)\n--\nlocal img = screen.image()\nwhile 1 do\n  local scn = screen.image()\n  local x, y, s = scn:find_image(img)\n  scn:destroy()\n  if s < 95 then\n    break\n  end\n  sys.msleep(10)\nend\n--\nsys.alert("The screen has moved")\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"save-an-image-object-to-the-album-imagesave_to_album",children:["Save an Image Object to the Album (",(0,l.jsx)(n.strong,{children:"image:save_to_album"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-13",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image:save_to_album()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-13",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-save-full-screen-content-to-the-album",children:"Example: Save Full-Screen Content to the Album"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:save_to_album"',children:"screen.image():save_to_album()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"example-save-a-file-to-the-album",children:"Example: Save a File to the Album"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:save_to_album"',children:'img = image.load_file("/var/mobile/1.png")\nif image.is(img) then\n  img:save_to_album()\nend\n'})}),"\n",(0,l.jsx)(n.h4,{id:"example-download-a-small-image-from-the-internet-and-save-it-directly-to-the-album",children:"Example: Download a Small Image from the Internet and Save it Directly to the Album"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:save_to_album"',children:'local c, h, r = http.get("https://dgss0.bdstatic.com/5bVWsj_p_tVS5dKfpU_Y_D3/res/r/image/2017-09-27/297f5edb1e984613083a2d3cc0c5bb36.png", 10)\nif c == 200 then\n  local img = image.load_data(r)\n  img:save_to_album()\n  sys.alert("The image has been saved to the album")\nelse\n  sys.alert("Download failed")\nend\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"output-an-image-object-to-a-png-file-or-data-imagesave_to_png_fileimage",children:["Output an Image Object to a PNG File or Data (",(0,l.jsxs)(n.strong,{children:["image:save_to_png_file/image",":png_data"]}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-14",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image:save_to_png_file(file_path)\nPNG_data = image:png_data()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-14",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["file_path ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["PNG_data","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", the PNG format data of the image"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-save-full-screen-image-to-a-file",children:"Example: Save Full-Screen Image to a File"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:save_to_png_file"',children:'screen.image():save_to_png_file("/var/mobile/1.png")\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"output-an-image-object-to-a-jpeg-file-or-data-imagesave_to_jpeg_fileimage",children:["Output an Image Object to a JPEG File or Data (",(0,l.jsxs)(n.strong,{children:["image:save_to_jpeg_file/image",":jpeg_data"]}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-15",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image:save_to_jpeg_file(file_path[, quality])\nJPEG_data = image:jpeg_data([ quality ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-15",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["file_path ",(0,l.jsx)(n.em,{children:"string"})]}),"\n",(0,l.jsxs)(n.li,{children:["quality","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", range 0.0 ~ 1.0, default ",(0,l.jsx)(n.code,{children:"1.0"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["JPEG_data","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", the JPEG format data of the image"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-save-full-screen-image-to-a-file-1",children:"Example: Save Full-Screen Image to a File"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:save_to_jpeg_file"',children:'screen.image():save_to_jpeg_file("/var/mobile/1.jpg")\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:save_to_jpeg_file"',children:'-- Save full-screen image to a file and set the image to low quality (keywords: lossy compression, image compression, image quality)\nscreen.image():save_to_jpeg_file("/var/mobile/1.jpg", 0.4)\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"rotate-an-image-object-imageturn_leftrightupondown",children:["Rotate an Image Object (",(0,l.jsx)(n.strong,{children:"image:turn_left,right,upondown"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-16",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:turn_left()      -- Rotate 90 degrees counterclockwise \u2934\ufe0f\nimage = image:turn_right()     -- Rotate 90 degrees clockwise \u2935\ufe0f\nimage = image:turn_upondown()  -- Flip vertically \ud83d\udd04\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-16",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-6",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Rotates the image object."}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsx)(n.p,{children:"This process does not create a data copy."})}),"\n",(0,l.jsxs)(n.h3,{id:"resize-an-image-object-imageresize",children:["Resize an Image Object (",(0,l.jsx)(n.strong,{children:"image:resize"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-17",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:resize(width, height)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-17",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["width, height","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the width and height after resizing"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This function is implemented based on Apple\u2019s ",(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate",children:"Accelerate"})," framework, so it runs efficiently on iOS. The call process will create a data copy."]})}),"\n",(0,l.jsxs)(n.h3,{id:"opencv-resize-an-image-object-imagecv_resize",children:["OpenCV Resize an Image Object (",(0,l.jsx)(n.strong,{children:"image:cv_resize"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-18",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:cv_resize(width, height)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-18",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["width, height","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the width and height after resizing"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This function is implemented based on ",(0,l.jsx)(n.a,{href:"https://opencv.org/",children:"OpenCV"})," ",(0,l.jsx)(n.a,{href:"https://docs.opencv.org/3.4/da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d",children:(0,l.jsx)(n.code,{children:"cv::resize"})})," function. The call process will create a data copy."]})}),"\n",(0,l.jsxs)(n.h3,{id:"flip-an-image-object-imageflip",children:["Flip an Image Object (",(0,l.jsx)(n.strong,{children:"image:flip"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-19",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:flip(direction)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-19",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["direction ",(0,l.jsx)(n.em,{children:"enum"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"0"})," for vertical flip"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"1"})," for horizontal flip"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-1"})," for both vertical and horizontal flip, equivalent to rotating 180 degrees"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This function is implemented based on Apple\u2019s ",(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate",children:"Accelerate"})," framework, so it runs efficiently on iOS. The call process will create a data copy."]})}),"\n",(0,l.jsxs)(n.h3,{id:"opencv-flip-an-image-object-imagecv_flip",children:["OpenCV Flip an Image Object (",(0,l.jsx)(n.strong,{children:"image:cv_flip"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-20",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:cv_flip(direction)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-20",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["direction ",(0,l.jsx)(n.em,{children:"enum"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"0"})," for vertical flip"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"1"})," for horizontal flip"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-1"})," for both vertical and horizontal flip, equivalent to rotating 180 degrees"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This function is implemented based on ",(0,l.jsx)(n.a,{href:"https://opencv.org/",children:"OpenCV"})," ",(0,l.jsx)(n.a,{href:"https://docs.opencv.org/3.4/d2/de8/group__core__array.html#gaca7be533e3dac7feb70fc60635adf441",children:(0,l.jsx)(n.code,{children:"cv::flip"})})," and ",(0,l.jsx)(n.a,{href:"https://docs.opencv.org/3.4/d2/de8/group__core__array.html#ga4ad01c0978b0ce64baa246811deeac24",children:(0,l.jsx)(n.code,{children:"cv::rotate"})})," functions. The call process will create a data copy."]})}),"\n",(0,l.jsxs)(n.h3,{id:"get-the-color-of-a-point-in-an-image-object-imageget_color",children:["Get the Color of a Point in an Image Object (",(0,l.jsx)(n.strong,{children:"image:get_color"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-21",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"color, alpha = image:get_color(x, y)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-21",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["x, y","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the coordinates of the point in the current image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the color value of the point in the current image object. Note that if the alpha is not ",(0,l.jsx)(n.code,{children:"255"}),", the actual red, green, and blue values of the color need to be divided by the opacity (alpha / 255)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["alpha","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the opacity of the point in the current image object, range 0 ~ 255"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-7",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Gets the color of a point in the image object, which differs from screen color picking in that the pixels in the image have an additional transparency attribute."}),"\n",(0,l.jsx)(n.h4,{id:"example-8",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:get_color"',children:'local img = image.load_file("/var/mobile/1.png")\nlocal clr = img:get_color(100, 100)\nsys.alert(string.format("The color at coordinate (100, 100) in the image is: 0x%06x", clr))\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"set-the-color-of-a-point-in-an-image-object-imageset_color",children:["Set the Color of a Point in an Image Object (",(0,l.jsx)(n.strong,{children:"image:set_color"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-22",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:set_color(x, y, color)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-22",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["x, y","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the coordinates of the point in the current image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the color value to be set"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-8",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Sets the color of a point in the image object."}),"\n",(0,l.jsxs)(n.h3,{id:"replace-color-imagereplace_color",children:["Replace Color (",(0,l.jsx)(n.strong,{children:"image:replace_color"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-23",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:replace_color(original_color, replacement_color[, similarity])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-23",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["original_color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the original color"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["replacement_color","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the color to replace with"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["similarity","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", colors with a similarity to ",(0,l.jsx)(n.strong,{children:"original_color"})," less than this value will be replaced by ",(0,l.jsx)(n.strong,{children:"replacement_color"}),". Range 0 ~ 100, default ",(0,l.jsx)(n.code,{children:"100"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-9",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Replaces a certain color (or similar colors) in the image object with another color, usually used for background color removal or replacement."}),"\n",(0,l.jsxs)(n.h3,{id:"draw-an-image-on-another-image-imagedraw_image",children:["Draw an Image on Another Image (",(0,l.jsx)(n.strong,{children:"image:draw_image"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-24",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"large_image = large_image:draw_image(small_image[, {\n  left = x_coordinate_of_top_left,\n  top = y_coordinate_of_top_left,\n  alpha = opacity,\n  background = {\n    {color*, color_deviation*},\n    {color*, color_deviation*},\n    ...\n  },\n}])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-24",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["large_image","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the current image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["small_image","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the image to be drawn on the ",(0,l.jsx)(n.strong,{children:"large_image"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["x_coordinate_of_top_left","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the x coordinate of the top left corner where the ",(0,l.jsx)(n.strong,{children:"small_image"})," will be drawn on the ",(0,l.jsx)(n.strong,{children:"large_image"}),", default ",(0,l.jsx)(n.code,{children:"0"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["y_coordinate_of_top_left","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the y coordinate of the top left corner where the ",(0,l.jsx)(n.strong,{children:"small_image"})," will be drawn on the ",(0,l.jsx)(n.strong,{children:"large_image"}),", default ",(0,l.jsx)(n.code,{children:"0"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["opacity","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", the opacity of the ",(0,l.jsx)(n.strong,{children:"small_image"}),", range 0 ~ 255, default ",(0,l.jsx)(n.code,{children:"255"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["color*, color_deviation*","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"table"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", colors in the ",(0,l.jsx)(n.strong,{children:"small_image"})," with a color deviation within the range of color_deviation* will not be drawn on the ",(0,l.jsx)(n.strong,{children:"large_image"}),", default ",(0,l.jsx)(n.strong,{children:"do not ignore any color"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-10",children:"Description"}),"\n",(0,l.jsx)(n.p,{children:"Draws another image on the image."}),"\n",(0,l.jsx)(n.h4,{id:"example-9",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:draw_image"',children:'local img = screen.image()\nlocal txt = image.new_text_image("Hello, world!", {\n  color = 0xff0000,\n  size = 20,\n})\nimg:draw_image(txt, {\n  left = 100,\n  top = 100,\n  alpha = 128,\n  background = {\n    {0x000000, 0x101010},\n    {0xffffff, 0x101010},\n  },\n})\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"opencv-threshold-binarization-imagecv_binarization",children:["OpenCV Threshold Binarization (",(0,l.jsx)(n.strong,{children:"image:cv_binarization"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-25",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:cv_binarization([ threshold ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-25",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["threshold","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", range 0 ~ 255, default threshold is automatically selected by ",(0,l.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Otsu%27s_method",children:"Otsu\u2019s method"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-11",children:"Description"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Binarizes the image object, converting it to black and white."}),"\n",(0,l.jsx)(n.li,{children:"The higher the threshold, the darker the image, and vice versa."}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This method is a wrapper for ",(0,l.jsx)(n.a,{href:"https://opencv.org/",children:"OpenCV"})," ",(0,l.jsx)(n.a,{href:"https://docs.opencv.org/3.4/d7/d4d/tutorial_py_thresholding.html",children:"cv::threshold"})," method."]})}),"\n",(0,l.jsxs)(n.h3,{id:"opencv-adaptive-binarization-imagecv_adaptive_binarization",children:["OpenCV Adaptive Binarization (",(0,l.jsx)(n.strong,{children:"image:cv_adaptive_binarization"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-26",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:cv_adaptive_binarization(neighborhood_size[, constant_C, gaussian_weighted ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-26",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["neighborhood_size","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", range greater than or equal to 3 and must be odd"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["constant_C","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", default value is ",(0,l.jsx)(n.code,{children:"0"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["gaussian_weighted","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"boolean"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", default value is ",(0,l.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-12",children:"Description"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Binarizes the image object, converting it to black and white."}),"\n",(0,l.jsxs)(n.li,{children:["The binarization threshold is obtained by subtracting ",(0,l.jsx)(n.strong,{children:"constant_C"})," from the average or Gaussian weighted average of the pixels in the neighborhood."]}),"\n",(0,l.jsxs)(n.li,{children:["Commonly used to handle images with ",(0,l.jsx)(n.strong,{children:"noise"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This function is a wrapper for ",(0,l.jsx)(n.a,{href:"https://opencv.org/",children:"OpenCV"})," ",(0,l.jsx)(n.a,{href:"https://docs.opencv.org/3.4/d7/d4d/tutorial_py_thresholding.html",children:"cv::adaptiveThreshold"})," method."]})}),"\n",(0,l.jsxs)(n.h3,{id:"color-deviation-binarization-imagebinaryzation",children:["Color Deviation Binarization (",(0,l.jsx)(n.strong,{children:"image:binaryzation"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-1-1",children:"Declaration 1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:binaryzation({\n  {color*, color_deviation*},\n  {color*, color_deviation*},\n  ...\n})\n"})}),"\n",(0,l.jsx)(n.h4,{id:"declaration-2-1",children:"Declaration 2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'image = image:binaryzation("cx*-cox*,cx*-cox*...")\n'})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-27",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["color*, color_deviation*","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", color value whitelist, color* is the color value itself, color_deviation* is the maximum color deviation of color*"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["cx*-cox*","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"string"}),", color value whitelist, cx* is the hexadecimal text description of the color value itself, cox* is the hexadecimal text description of the maximum color deviation of cx*"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"example-1-1",children:"Example 1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:binaryzation"',children:"local pic = screen.image(462, 242, 569, 272)\npic = pic:binaryzation({\n  {0x9D5D39, 0x0F1F26},\n  {0xD3D3D2, 0x2C2C2D},\n})\n"})}),"\n",(0,l.jsx)(n.h4,{id:"example-2-1",children:"Example 2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",metastring:'title="image:binaryzation.cx-cox"',children:'local pic = screen.image(462, 242, 569, 272)\npic = pic:binaryzation("9D5D39-0F1F26,D3D3D2-2C2C2D")\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"gpu-accelerated-binarization-imagebinarization",children:["GPU Accelerated Binarization (",(0,l.jsx)(n.strong,{children:"image:binarization"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-27",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"image = image:binarization([ dither_algorithm_type ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-28",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n",(0,l.jsxs)(n.li,{children:["dither_algorithm_type","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"enum"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", default is ",(0,l.jsx)(n.code,{children:"0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate/1533233-dithering_methods/kvimageconvert_dithernone",children:(0,l.jsx)(n.code,{children:"kvImageConvert_DitherNone"})})," = ",(0,l.jsx)(n.code,{children:"0"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate/1533233-dithering_methods/kvimageconvert_ditherordered",children:(0,l.jsx)(n.code,{children:"kvImageConvert_DitherOrdered"})})," = ",(0,l.jsx)(n.code,{children:"1"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate/1533233-dithering_methods/kvimageconvert_ditherorderedreproducible",children:(0,l.jsx)(n.code,{children:"kvImageConvert_DitherOrderedReproducible"})})," = ",(0,l.jsx)(n.code,{children:"2"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate/1533233-dithering_methods/kvimageconvert_ditherfloydsteinberg",children:(0,l.jsx)(n.code,{children:"kvImageConvert_DitherFloydSteinberg"})})," = ",(0,l.jsx)(n.code,{children:"3"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate/1533233-dithering_methods/kvimageconvert_ditheratkinson",children:(0,l.jsx)(n.code,{children:"kvImageConvert_DitherAtkinson"})})," = ",(0,l.jsx)(n.code,{children:"4"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["This method is a wrapper for Apple\u2019s ",(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/vision",children:"Vision"})," framework ",(0,l.jsx)(n.a,{href:"https://developer.apple.com/documentation/accelerate/1533024-vimageconvert_planar8toplanar1",children:(0,l.jsx)(n.code,{children:"vImageConvert_Planar8toPlanar1"})})," method."]})}),"\n",(0,l.jsxs)(n.h3,{id:"multi-point-color-matching-in-an-image-imageis_colors",children:["Multi-Point Color Matching in an Image (",(0,l.jsx)(n.strong,{children:"image:is_colors"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-28",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"is_exact_match = image:is_colors(...)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-29",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"refer-to-screenis_colors-description",children:(0,l.jsxs)(n.a,{href:"/docs/lua-manual/screen#-screen-multi-point-color-matching-screenis_colors",children:["Refer to ",(0,l.jsx)(n.code,{children:"screen.is_colors"})," description"]})}),"\n",(0,l.jsxs)(n.h3,{id:"find-color-in-an-image-imagefind_color",children:["Find Color in an Image (",(0,l.jsx)(n.strong,{children:"image:find_color"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-29",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"x, y = image:find_color(...)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-30",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"refer-to-screenfind_color-description",children:(0,l.jsxs)(n.a,{href:"/docs/lua-manual/screen#-multi-point-similarity-mode-color-finding-screenfind_color",children:["Refer to ",(0,l.jsx)(n.code,{children:"screen.find_color"})," description"]})}),"\n",(0,l.jsxs)(n.h3,{id:"opencv-find-image-in-an-image-imagecv_find_image",children:["OpenCV Find Image in an Image (",(0,l.jsx)(n.strong,{children:"image:cv_find_image"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-30",children:"Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"x, y, similarity = large_image:find_image(small_image)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-31",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["large_image","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the current image object"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["small_image","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"image object"}),", the image to be found"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["x, y","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"integer"}),", the coordinates of the top left corner of the most matching position of the ",(0,l.jsx)(n.strong,{children:"small_image"})," in the ",(0,l.jsx)(n.strong,{children:"large_image"}),", returns ",(0,l.jsx)(n.code,{children:"-1, -1"})," if the search fails"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["similarity","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"number"}),", ",(0,l.jsx)(n.em,{children:"optional"}),", returns the similarity of the most matching position of the ",(0,l.jsx)(n.strong,{children:"small_image"})," in the ",(0,l.jsx)(n.strong,{children:"large_image"}),", range 0 ~ 100, returns ",(0,l.jsx)(n.code,{children:"0"})," if the search fails"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"description-13",children:"Description"}),"\n",(0,l.jsxs)(n.p,{children:["This function is similar to the ",(0,l.jsx)(n.a,{href:"/docs/lua-manual/screen#-screen-image-finding-screenfind_image",children:(0,l.jsx)(n.code,{children:"screen.find_image"})})," function, but this function finds an image within another image, while the former finds an image on the screen. Other differences are as follows:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["The ",(0,l.jsx)(n.strong,{children:"small_image"})," parameter only supports passing in ",(0,l.jsx)(n.em,{children:"image object"}),", not ",(0,l.jsx)(n.em,{children:"string"})," or ",(0,l.jsx)(n.em,{children:"string"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Does not support passing in ",(0,l.jsx)(n.strong,{children:"similarity"})," and search area."]}),"\n",(0,l.jsxs)(n.li,{children:["Does not perform multi-scale adjustments on the ",(0,l.jsx)(n.strong,{children:"small_image"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"optical-character-recognition-ocr-in-an-image-imageocr_text",children:["Optical Character Recognition (OCR) in an Image (",(0,l.jsx)(n.strong,{children:"image:ocr_text"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"common-declaration",children:"Common Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"result_text_list, result_details = image:ocr_text([ recognition_level, timeout ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-32",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"refer-to-screenocr_text-description",children:(0,l.jsxs)(n.a,{href:"/docs/lua-manual/screen#-screen-optical-character-recognition-screenocr_text",children:["Refer to ",(0,l.jsx)(n.code,{children:"screen.ocr_text"})," description"]})}),"\n",(0,l.jsxs)(n.h3,{id:"tesseract-optical-character-recognition-ocr-in-an-image-imagetess_ocr",children:["Tesseract Optical Character Recognition (OCR) in an Image (",(0,l.jsx)(n.strong,{children:"image:tess_ocr"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"declaration-1-2",children:"Declaration 1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'require("image.tesseract")  -- Needs to be loaded in advance\n--\nrecognition_result, result_details = image:tess_ocr([{\n  [lang = language_library_name,]\n  [white_list = white_list,]\n  [black_list = black_list,]\n  [left   = left,]\n  [top    = top,]\n  [right  = right,]\n  [bottom = bottom,]\n}])\n'})}),"\n",(0,l.jsx)(n.h4,{id:"declaration-2-2",children:"Declaration 2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'require("image.tesseract")  -- Needs to be loaded in advance\n--\nrecognition_result, result_details = image:tess_ocr([ language_library_name ])\n'})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-33",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"refer-to-screentess_ocr-description",children:(0,l.jsxs)(n.a,{href:"/docs/lua-manual/screen#-tesseract-screen-optical-character-recognition-screentess_ocr",children:["Refer to ",(0,l.jsx)(n.code,{children:"screen.tess_ocr"})," description"]})}),"\n",(0,l.jsxs)(n.h3,{id:"qr-code-recognition-in-an-image-imageqr_decode",children:["QR Code Recognition in an Image (",(0,l.jsx)(n.strong,{children:"image:qr_decode"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"common-declaration-1",children:"Common Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"recognition_result_text, result_details_table = image:qr_decode([ timeout ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-34",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"refer-to-screenqr_decode-description",children:(0,l.jsxs)(n.a,{href:"/docs/lua-manual/screen#-screen-qr-code-recognition-screenqr_decode",children:["Refer to ",(0,l.jsx)(n.code,{children:"screen.qr_decode"})," description"]})}),"\n",(0,l.jsxs)(n.h3,{id:"rectangle-detection-in-an-image-imagedetect_rectangles",children:["Rectangle Detection in an Image (",(0,l.jsx)(n.strong,{children:"image:detect_rectangles"}),")"]}),"\n",(0,l.jsx)(n.h4,{id:"common-declaration-2",children:"Common Declaration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"rectangle_positions_table, result_details_table = image:detect_rectangles([ max_results, timeout ])\n"})}),"\n",(0,l.jsx)(n.h4,{id:"parameters-and-return-values-35",children:"Parameters and Return Values"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["image ",(0,l.jsx)(n.em,{children:"image object"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"refer-to-screendetect_rectangles-description",children:(0,l.jsxs)(n.a,{href:"/docs/lua-manual/screen#-screen-rectangle-detection-screendetect_rectangles",children:["Refer to ",(0,l.jsx)(n.code,{children:"screen.detect_rectangles"})," description"]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>t});var a=i(6540);const l={},r=a.createContext(l);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);