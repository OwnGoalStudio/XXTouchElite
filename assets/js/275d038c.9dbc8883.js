"use strict";(self.webpackChunkxxtouch_lite=self.webpackChunkxxtouch_lite||[]).push([[3973],{7395:(e,l,r)=>{r.r(l),r.d(l,{assets:()=>t,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"lua-manual/profile","title":"Profile Module","description":"Profile Module - profile","source":"@site/docs/lua-manual/profile.md","sourceDirName":"lua-manual","slug":"/lua-manual/profile","permalink":"/docs/lua-manual/profile","draft":false,"unlisted":false,"editUrl":"https://github.com/OwnGoalStudio/XXTouchElite/tree/main/docs/lua-manual/profile.md","tags":[],"version":"current","sidebarPosition":27,"frontMatter":{"sidebar_position":27},"sidebar":"luaManualSidebar","previous":{"title":"Network Configuration Module","permalink":"/docs/lua-manual/ethconf"},"next":{"title":"OTP Authentication Assistant","permalink":"/docs/lua-manual/auth"}}');var n=r(4848),a=r(8453);const s={sidebar_position:27},o="Profile Module",t={},d=[{value:"Profile Module - profile",id:"profile-module---profile",level:2},{value:"Import Profile (<strong>profile.import</strong>)",id:"import-profile-profileimport",level:3},{value:"Declaration",id:"declaration",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values",level:4},{value:"Description",id:"description",level:4},{value:"Example",id:"example",level:4},{value:"List All Profiles (<strong>profile.list</strong>)",id:"list-all-profiles-profilelist",level:3},{value:"Declaration",id:"declaration-1",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-1",level:4},{value:"Example",id:"example-1",level:4},{value:"Fetch Profile (<strong>profile.fetch</strong>)",id:"fetch-profile-profilefetch",level:3},{value:"Declaration",id:"declaration-2",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-2",level:4},{value:"Profile Structure",id:"profile-structure",level:4},{value:"Example",id:"example-2",level:4},{value:"Remove Profile (<strong>profile.remove</strong>)",id:"remove-profile-profileremove",level:3},{value:"Declaration",id:"declaration-3",level:4},{value:"Parameters and Return Values",id:"parameters-and-return-values-3",level:4},{value:"Example",id:"example-3",level:4},{value:"Clear All Profiles (<strong>profile.clear</strong>)",id:"clear-all-profiles-profileclear",level:3},{value:"Declaration",id:"declaration-4",level:4}];function c(e){const l={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.header,{children:(0,n.jsx)(l.h1,{id:"profile-module",children:"Profile Module"})}),"\n",(0,n.jsx)(l.h2,{id:"profile-module---profile",children:"Profile Module - profile"}),"\n",(0,n.jsxs)(l.h3,{id:"import-profile-profileimport",children:["Import Profile (",(0,n.jsx)(l.strong,{children:"profile.import"}),")"]}),"\n",(0,n.jsx)(l.h4,{id:"declaration",children:"Declaration"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",children:"success, error_message = profile.import(profile_path[, install])\n"})}),"\n",(0,n.jsx)(l.h4,{id:"parameters-and-return-values",children:"Parameters and Return Values"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["profile_path ",(0,n.jsx)(l.em,{children:"string"})]}),"\n",(0,n.jsxs)(l.li,{children:["install ",(0,n.jsx)(l.em,{children:"boolean"}),", optional, defaults to ",(0,n.jsx)(l.code,{children:"false"})]}),"\n",(0,n.jsxs)(l.li,{children:["success ",(0,n.jsx)(l.em,{children:"boolean"})]}),"\n",(0,n.jsxs)(l.li,{children:["error_message ",(0,n.jsx)(l.em,{children:"string"})]}),"\n"]}),"\n",(0,n.jsx)(l.h4,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(l.p,{children:["Imports a specified profile into ",(0,n.jsx)(l.strong,{children:'"Settings"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"Downloaded Profiles"'}),".\nIf ",(0,n.jsx)(l.strong,{children:"install"})," is set to ",(0,n.jsx)(l.code,{children:"true"}),", the specified profile will also be installed into ",(0,n.jsx)(l.strong,{children:'"Settings"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"General"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"Profiles & Device Management"'}),"."]}),"\n",(0,n.jsx)(l.admonition,{type:"info",children:(0,n.jsxs)(l.p,{children:["If the installed profile is a root certificate, it will automatically be added to ",(0,n.jsx)(l.strong,{children:'"Settings"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"General"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"About"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"Certificate Trust Settings"'})," \u2192 ",(0,n.jsx)(l.strong,{children:'"Enable Full Trust for Root Certificates"'})," and fully trusted."]})}),"\n",(0,n.jsx)(l.admonition,{type:"note",children:(0,n.jsx)(l.p,{children:"Installing the same profile multiple times will overwrite the previous one."})}),"\n",(0,n.jsx)(l.h4,{id:"example",children:"Example"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",metastring:'title="profile.import"',children:'profile.import("XXTouch_Root_CA.pem")\n'})}),"\n",(0,n.jsxs)(l.h3,{id:"list-all-profiles-profilelist",children:["List All Profiles (",(0,n.jsx)(l.strong,{children:"profile.list"}),")"]}),"\n",(0,n.jsx)(l.h4,{id:"declaration-1",children:"Declaration"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",children:"profile_list = profile.list()\n"})}),"\n",(0,n.jsx)(l.h4,{id:"parameters-and-return-values-1",children:"Parameters and Return Values"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["profile_list","\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.em,{children:"array"}),", where each element is a ",(0,n.jsx)(l.em,{children:"table"})," representing a profile. The structure is detailed in ",(0,n.jsx)(l.a,{href:"#profile-structure",children:"Profile Structure"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(l.h4,{id:"example-1",children:"Example"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",metastring:'title="profile.list"',children:"local profiles = profile.list()\nfor _, profile in ipairs(profiles) do\n  nLog(profile.PayloadDisplayName)\nend\n"})}),"\n",(0,n.jsxs)(l.h3,{id:"fetch-profile-profilefetch",children:["Fetch Profile (",(0,n.jsx)(l.strong,{children:"profile.fetch"}),")"]}),"\n",(0,n.jsx)(l.h4,{id:"declaration-2",children:"Declaration"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",children:"profile = profile.fetch(profile_id)\n"})}),"\n",(0,n.jsx)(l.h4,{id:"parameters-and-return-values-2",children:"Parameters and Return Values"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["profile_id ",(0,n.jsx)(l.em,{children:"string"})]}),"\n",(0,n.jsxs)(l.li,{children:["profile","\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:[(0,n.jsx)(l.em,{children:"table"}),", with the following structure. If the specified profile does not exist, returns ",(0,n.jsx)(l.code,{children:"nil"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(l.h4,{id:"profile-structure",children:"Profile Structure"}),"\n",(0,n.jsxs)(l.p,{children:["Some fields are truncated as ",(0,n.jsx)(l.code,{children:"..."})," for brevity.\nThe ",(0,n.jsx)(l.code,{children:"PayloadIdentifier"})," is the ",(0,n.jsx)(l.strong,{children:"profile_id"}),"."]}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",children:'{\n  ["PayloadType"] = "CertificateWrapper",\n  ["PayloadUUID"] = "B53CE4EA-23F1-48A8-9289-EFA36489D9AA",\n  ["PayloadIdentifier"] = "aef166f14b22d087e040a4708d7548bc8a531be9a",  -- profile_id\n  ["PayloadVersion"] = 1,\n  ["PayloadDisplayName"] = "XXTouch Root CA",\n  ["ProfileWasEncrypted"] = false,\n  ["InstallDate"] = 1665686224.0,\n  ["TargetDeviceType"] = 0,\n  ["PayloadContent"] = {\n    [1] = {\n      ["PayloadUUID"] = "40F0B824-1C65-4A3F-9D28-23A1F1BD6993",\n      ["PayloadIdentifier"] = "aef166f14b22d087e040a4708d7548bc8a531be9a",\n      ["IsIdentity"] = false,\n      ["UDID"] = "0cca9d9258359bc9e1416b29ce94aa05b981abe7",\n      ["PayloadType"] = "com.apple.security.pkcs1",\n      ["Expiry"] = 995617667.0,\n      ["PayloadDisplayName"] = "XXTouch Root CA",\n      ["PayloadVersion"] = 1,\n      ["IsRoot"] = true,\n      ["PERSISTENT_REF"] = ...,\n    },\n  },\n  ["SignerCerts"] = { ... },\n  ["InstallOptions"] = { ... },\n  ["MCProfileIsRemovalStub"] = true,\n}\n'})}),"\n",(0,n.jsx)(l.h4,{id:"example-2",children:"Example"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",metastring:'title="profile.fetch"',children:'local res = profile.fetch("aef166f14b22d087e040a4708d7548bc8a531be9a")\nif res then\n  nLog(res.PayloadDisplayName)\nend\n'})}),"\n",(0,n.jsxs)(l.h3,{id:"remove-profile-profileremove",children:["Remove Profile (",(0,n.jsx)(l.strong,{children:"profile.remove"}),")"]}),"\n",(0,n.jsx)(l.h4,{id:"declaration-3",children:"Declaration"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",children:"profile.remove(profile_id)\n"})}),"\n",(0,n.jsx)(l.h4,{id:"parameters-and-return-values-3",children:"Parameters and Return Values"}),"\n",(0,n.jsxs)(l.ul,{children:["\n",(0,n.jsxs)(l.li,{children:["profile_id ",(0,n.jsx)(l.em,{children:"string"})]}),"\n"]}),"\n",(0,n.jsx)(l.h4,{id:"example-3",children:"Example"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",metastring:'title="profile.remove"',children:'profile.remove("aef166f14b22d087e040a4708d7548bc8a531be9a")\n'})}),"\n",(0,n.jsxs)(l.h3,{id:"clear-all-profiles-profileclear",children:["Clear All Profiles (",(0,n.jsx)(l.strong,{children:"profile.clear"}),")"]}),"\n",(0,n.jsx)(l.h4,{id:"declaration-4",children:"Declaration"}),"\n",(0,n.jsx)(l.pre,{children:(0,n.jsx)(l.code,{className:"language-lua",children:"profile.clear()\n"})}),"\n",(0,n.jsx)(l.admonition,{type:"caution",children:(0,n.jsx)(l.p,{children:"Immediately clears all installed profiles. Use with caution."})})]})}function p(e={}){const{wrapper:l}={...(0,a.R)(),...e.components};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,l,r)=>{r.d(l,{R:()=>s,x:()=>o});var i=r(6540);const n={},a=i.createContext(n);function s(e){const l=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function o(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),i.createElement(a.Provider,{value:l},e.children)}}}]);